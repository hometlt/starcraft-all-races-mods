<html>
<head>
    <script src="./vivagraph.js"></script>
    <script type="module">
        let response = await fetch("./relations.json")
        const relations = await response.json();


        let nodesArray = []
        let graph = Viva.Graph.graph();
        {
            // for(let catalog in relations){
            let catalog = "unit"
            for (let entity of relations[catalog]) {
                let entityID = catalog + "." + entity.id
                graph.addNode(entityID);
            }
            // }
        }
        {
            // for(let catalog in relations){
            let catalog = "unit"
            for(let entity of relations[catalog]){
                let entityID = catalog+ "." + entity.id

                for(let relation of entity.relations){
                    graph.addLink(entityID,relation);
                }
            }
            // }
        }

        let graphics = Viva.Graph.View.webglGraphics();

        let renderer = Viva.Graph.View.renderer(graph, {graphics});
        renderer.run();

    </script>
</head>
<body>
</body>
</html>