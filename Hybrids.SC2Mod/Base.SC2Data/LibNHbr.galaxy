include "TriggerLibs/NativeLib"

include "LibNHBR_h"

//--------------------------------------------------------------------------------------------------
// Library: Network Hybrid Race
//--------------------------------------------------------------------------------------------------
// External Library Initialization
void libNHBR_InitLibraries () {
    libNtve_InitVariables();
}

// Variable Initialization
bool libNHBR_InitVariables_completed = false;

void libNHBR_InitVariables () {
    int init_i;

    if (libNHBR_InitVariables_completed) {
        return;
    }

    libNHBR_InitVariables_completed = true;

    libNHBR_gv_hybridBuildControllerRange = libNtve_gf_CatalogFieldValueGetAsReal(c_gameCatalogAbil, ("NHbrMinionBuild@Main"), "Range", c_playerAny);
    for (init_i = 0; init_i <= libNHBR_gv_bALMaxEnginePlayerCount; init_i += 1) {
        libNHBR_gv_hybridNetworkNewPowerSourceUnitGroup[init_i] = UnitGroupEmpty();
    }
    for (init_i = 0; init_i <= libNHBR_gv_bALMaxEnginePlayerCount; init_i += 1) {
        libNHBR_gv_hybridTeleportUnitGroup[init_i] = UnitGroupEmpty();
    }
    libNHBR_gv_silentWeaponCooldown = libNtve_gf_CatalogFieldValueGetAsReal(c_gameCatalogWeapon, "NHbrSilentWeapon", "Period", c_playerAny);
    libNHBR_gv_silentAttacksPerSecond = (1.0 / libNHBR_gv_silentWeaponCooldown);
}

// Presets
// Functions
int libNHBR_gf_CustomValueIndex (int lp_customValue) {
    // Automatic Variable Declarations
    // Implementation
    return (lp_customValue);
}

bool libNHBR_gf_HybridBuildControllerIsBuildOrder (order lp_order) {
    // Variable Declarations
    abilcmd lv_abilityCommand;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_abilityCommand = OrderGetAbilityCommand(lp_order);

    // Implementation
    if (((lv_abilityCommand == AbilityCommand("NHbrMinionBuild", 1)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild", 4)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild", 17)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild", 16)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild", 10)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild", 9)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild", 0)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild", 8)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild", 5)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild", 11)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild", 12)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild", 6)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild", 13)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild", 2)))) {
        return true;
    }

    return false;
}

bool libNHBR_gf_HybridBuildControllerIsBuildOrderMain (order lp_order) {
    // Variable Declarations
    abilcmd lv_abilityCommand;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_abilityCommand = OrderGetAbilityCommand(lp_order);

    // Implementation
    if (((lv_abilityCommand == AbilityCommand("NHbrMinionBuild@Main", 1)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild@Main", 4)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild@Main", 17)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild@Main", 16)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild@Main", 10)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild@Main", 9)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild@Main", 0)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild@Main", 8)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild@Main", 5)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild@Main", 11)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild@Main", 12)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild@Main", 6)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild@Main", 13)) || (lv_abilityCommand == AbilityCommand("NHbrMinionBuild@Main", 2)))) {
        return true;
    }

    return false;
}

abilcmd libNHBR_gf_HybridBuildControllerReturnMainBuildAbilityCommand (order lp_order) {
    // Variable Declarations
    int lv_index;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_index = AbilityCommandGetCommand(OrderGetAbilityCommand(lp_order));

    // Implementation
    return AbilityCommand("NHbrMinionBuild@Main", lv_index);
}

abilcmd libNHBR_gf_HybridBuildControllerReturnDefaultBuildAbilityCommand (order lp_order) {
    // Variable Declarations
    int lv_index;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_index = AbilityCommandGetCommand(OrderGetAbilityCommand(lp_order));

    // Implementation
    return AbilityCommand("NHbrMinionBuild", lv_index);
}

int libNHBR_gf_HybridBuildControllerClosestMainBuildAbilityCommandIndex (unit lp_minion) {
    // Variable Declarations
    int lv_itOrder;

    // Automatic Variable Declarations
    int autoC1436286_ae;
    const int autoC1436286_ai = 1;

    // Variable Initialization

    // Implementation
    autoC1436286_ae = (UnitOrderCount(lp_minion)-1);
    lv_itOrder = 0;
    for ( ; ( (autoC1436286_ai >= 0 && lv_itOrder <= autoC1436286_ae) || (autoC1436286_ai < 0 && lv_itOrder >= autoC1436286_ae) ) ; lv_itOrder += autoC1436286_ai ) {
        if ((libNHBR_gf_HybridBuildControllerIsBuildOrderMain(UnitOrder(lp_minion, lv_itOrder)) == true)) {
            return lv_itOrder;
        }

    }
    return -1;
}

fixed libNHBR_gf_HybridBuildControllerReturnBuildUnitRadius (order lp_order) {
    // Variable Declarations
    int lv_index;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_index = AbilityCommandGetCommand(OrderGetAbilityCommand(lp_order));

    // Implementation
    return libNtve_gf_CatalogFieldValueGetAsReal(c_gameCatalogUnit, CatalogFieldValueGet(c_gameCatalogAbil, ("NHbrMinionBuild@Main"), "InfoArray[" + IntToString(lv_index) + "].Unit", c_playerAny), "Radius", c_playerAny);
}

void libNHBR_gf_HybridTimeScaleBuffRemoveTimeScaleBuffFromUnit (unit lp_unit) {
    // Automatic Variable Declarations
    // Implementation
    UnitCreateEffectUnit(lp_unit, "NHbrTimeScaleBuff@RemoveTimeScaleBuff", lp_unit);
}

void libNHBR_gf_HybridTimeScaleBuffAddTimeScaleBuffToUnitFromUnit (unit lp_casterUnit, fixed lp_casterEnergyPerUsage, unit lp_targetUnit) {
    // Variable Declarations
    fixed lv_percent;
    int lv_index;

    // Automatic Variable Declarations
    // Variable Initialization

    // Implementation
    lv_percent = libNHBR_gf_HybridTimeScaleBuffBoosterPercentBuff(lp_casterUnit, lp_casterEnergyPerUsage);
    lv_index = FixedToInt((lv_percent * 100.0));
    UnitBehaviorAdd(lp_targetUnit, libNHBR_gv_hybridTimeScaleBuff[lv_index], lp_casterUnit, 1);
}

fixed libNHBR_gf_HybridTimeScaleBuffCalculateEnergyUsageForUnit (unit lp_unit) {
    // Variable Declarations
    fixed lv_energyUsage;
    int lv_energyMaximum;

    // Automatic Variable Declarations
    // Variable Initialization

    // Implementation
    lv_energyUsage = UnitGetPropertyFixed(lp_unit, c_unitPropEnergy, c_unitPropCurrent);
    if ((UnitGetType(lp_unit) == "NHbrMinion")) {
        if ((lv_energyUsage > libNHBR_gv_hybridTimeScaleBuffMaximumEnergyPerUsage_Minion_C)) {
            lv_energyUsage = libNHBR_gv_hybridTimeScaleBuffMaximumEnergyPerUsage_Minion_C;
        }

    }
    else {
        if ((lv_energyUsage > libNHBR_gv_hybridTimeScaleBuffMaximumEnergyPerUsage_Structure_C)) {
            lv_energyUsage = libNHBR_gv_hybridTimeScaleBuffMaximumEnergyPerUsage_Structure_C;
        }

    }
    return lv_energyUsage;
}

fixed libNHBR_gf_HybridTimeScaleBuffBoosterPercentBuff (unit lp_casterUnit, fixed lp_casterEnergyPerUsage) {
    // Variable Declarations
    fixed lv_percent;

    // Automatic Variable Declarations
    // Variable Initialization

    // Implementation
    lv_percent = (lp_casterEnergyPerUsage / libNHBR_gv_hybridTimeScaleBuffMaximumEnergyPerUsage_Structure_C);
    if ((lv_percent > libNHBR_gv_hybridTimeScaleBuffMaximumTimeScaleBonus_C)) {
        lv_percent = libNHBR_gv_hybridTimeScaleBuffMaximumTimeScaleBonus_C;
    }

    return lv_percent;
}

fixed libNHBR_gf_HybridTimeScaleBuffUnitConstructionTime (unit lp_unit, string lp_ability) {
    // Variable Declarations
    string lv_unitType;
    string lv_itUnitType;
    int lv_itField;
    fixed lv_time;

    // Automatic Variable Declarations
    const int auto01CA055F_ae = 29;
    const int auto01CA055F_ai = 1;

    // Variable Initialization
    lv_unitType = UnitGetType(lp_unit);

    // Implementation
    lv_itField = 0;
    for ( ; ( (auto01CA055F_ai >= 0 && lv_itField <= auto01CA055F_ae) || (auto01CA055F_ai < 0 && lv_itField >= auto01CA055F_ae) ) ; lv_itField += auto01CA055F_ai ) {
        lv_itUnitType = (CatalogFieldValueGet(c_gameCatalogAbil, lp_ability, "InfoArray[" + IntToString(lv_itField) + "].Unit", c_playerAny));
        if ((lv_itUnitType == lv_unitType)) {
            return libNtve_gf_CatalogFieldValueGetAsReal(c_gameCatalogAbil, lp_ability, "InfoArray[" + IntToString(lv_itField) + "].Time", c_playerAny);
        }

    }
    return 0.0;
}

fixed libNHBR_gf_HybridTimeScaleBuffUpgradeResearchTime (string lp_upgrade, string lp_ability) {
    // Variable Declarations
    string lv_itUnitType;
    int lv_itField;
    fixed lv_time;

    // Automatic Variable Declarations
    const int auto7D284008_ae = 29;
    const int auto7D284008_ai = 1;

    // Variable Initialization

    // Implementation
    lv_itField = 0;
    for ( ; ( (auto7D284008_ai >= 0 && lv_itField <= auto7D284008_ae) || (auto7D284008_ai < 0 && lv_itField >= auto7D284008_ae) ) ; lv_itField += auto7D284008_ai ) {
        lv_itUnitType = (CatalogFieldValueGet(c_gameCatalogAbil, lp_ability, "InfoArray[" + IntToString(lv_itField) + "].Upgrade", c_playerAny));
        if ((lv_itUnitType == lp_upgrade)) {
            return libNtve_gf_CatalogFieldValueGetAsReal(c_gameCatalogAbil, lp_ability, "InfoArray[" + IntToString(lv_itField) + "].Time", c_playerAny);
        }

    }
    return 0.0;
}

string libNHBR_gf__UnitDataName (int lp_type, unit lp_unit, int lp_index) {
    // Variable Declarations
    string lv_name;

    // Automatic Variable Declarations
    int auto1EA6F447_val;

    // Variable Initialization
    lv_name = "";

    // Implementation
    auto1EA6F447_val = lp_type;
    if (auto1EA6F447_val == libNHBR_ge__UnitDataType_Actor) {
        lv_name = "UDACTOR_";
    }
    else if (auto1EA6F447_val == libNHBR_ge__UnitDataType_Integer) {
        lv_name = "UDINTEGER_";
    }
    else if (auto1EA6F447_val == libNHBR_ge__UnitDataType_Ping) {
        lv_name = "UDPING_";
    }
    else if (auto1EA6F447_val == libNHBR_ge__UnitDataType_Point) {
        lv_name = "UDPOINT_";
    }
    else if (auto1EA6F447_val == libNHBR_ge__UnitDataType_Region) {
        lv_name = "UDREGION_";
    }
    else if (auto1EA6F447_val == libNHBR_ge__UnitDataType_TextTag) {
        lv_name = "UDTEXTTAG_";
    }
    else if (auto1EA6F447_val == libNHBR_ge__UnitDataType_Unit) {
        lv_name = "UDUNIT_";
    }
    else if (auto1EA6F447_val == libNHBR_ge__UnitDataType_UnitGroup) {
        lv_name = "UDUNITGROUP_";
    }
    else {
    }
    lv_name = (lv_name + IntToString(UnitGetTag(lp_unit)) + "_" + IntToString(lp_index));
    return lv_name;
}

void libNHBR_gf_StoreActorForUnit (unit lp_unit, int lp_index, actor lp_actor) {
    // Automatic Variable Declarations
    // Implementation
    DataTableSetActor(true, libNHBR_gf__UnitDataName(libNHBR_ge__UnitDataType_Actor, lp_unit, lp_index), lp_actor);
}

actor libNHBR_gf_ActorStoredForUnit (unit lp_unit, int lp_index) {
    // Automatic Variable Declarations
    // Implementation
    return DataTableGetActor(true, libNHBR_gf__UnitDataName(libNHBR_ge__UnitDataType_Actor, lp_unit, lp_index));
}

void libNHBR_gf_StoreTextTagForUnit (unit lp_unit, int lp_index, int lp_textTag) {
    // Automatic Variable Declarations
    // Implementation
    libNtve_gf_SaveDataTableValueTextTag(true, libNHBR_gf__UnitDataName(libNHBR_ge__UnitDataType_TextTag, lp_unit, lp_index), lp_textTag);
}

int libNHBR_gf_TextTagStoredForUnit (unit lp_unit, int lp_index) {
    // Automatic Variable Declarations
    // Implementation
    return libNtve_gf_ValueFromDataTableTextTag(true, libNHBR_gf__UnitDataName(libNHBR_ge__UnitDataType_TextTag, lp_unit, lp_index));
}

void libNHBR_gf_StorePointForUnit (unit lp_unit, int lp_index, point lp_point) {
    // Automatic Variable Declarations
    // Implementation
    DataTableSetPoint(true, libNHBR_gf__UnitDataName(libNHBR_ge__UnitDataType_Point, lp_unit, lp_index), lp_point);
}

point libNHBR_gf_PointStoredForUnit (unit lp_unit, int lp_index) {
    // Automatic Variable Declarations
    // Implementation
    return DataTableGetPoint(true, libNHBR_gf__UnitDataName(libNHBR_ge__UnitDataType_Point, lp_unit, lp_index));
}

void libNHBR_gf_StoreRegionForUnit (unit lp_unit, int lp_index, region lp_region) {
    // Automatic Variable Declarations
    // Implementation
    DataTableSetRegion(true, libNHBR_gf__UnitDataName(libNHBR_ge__UnitDataType_Point, lp_unit, lp_index), lp_region);
}

region libNHBR_gf_RegionStoredForUnit (unit lp_unit, int lp_index) {
    // Automatic Variable Declarations
    // Implementation
    return DataTableGetRegion(true, libNHBR_gf__UnitDataName(libNHBR_ge__UnitDataType_Point, lp_unit, lp_index));
}

void libNHBR_gf_StorePingForUnit (unit lp_unit, int lp_index, int lp_ping) {
    // Automatic Variable Declarations
    // Implementation
    DataTableSetPing(true, libNHBR_gf__UnitDataName(libNHBR_ge__UnitDataType_Ping, lp_unit, lp_index), lp_ping);
}

int libNHBR_gf_PingStoredForUnit (unit lp_unit, int lp_index) {
    // Automatic Variable Declarations
    // Implementation
    return DataTableGetPing(true, libNHBR_gf__UnitDataName(libNHBR_ge__UnitDataType_Ping, lp_unit, lp_index));
}

void libNHBR_gf_StoreIntegerForUnit (unit lp_unit, int lp_index, int lp_value) {
    // Automatic Variable Declarations
    // Implementation
    DataTableSetInt(true, libNHBR_gf__UnitDataName(libNHBR_ge__UnitDataType_Integer, lp_unit, lp_index), lp_value);
}

int libNHBR_gf_IntegerStoredForUnit (unit lp_unit, int lp_index) {
    // Automatic Variable Declarations
    // Implementation
    return DataTableGetInt(true, libNHBR_gf__UnitDataName(libNHBR_ge__UnitDataType_Integer, lp_unit, lp_index));
}

void libNHBR_gf_StoreUnitForUnit (unit lp_unit, int lp_index, unit lp_value) {
    // Automatic Variable Declarations
    // Implementation
    DataTableSetUnit(true, libNHBR_gf__UnitDataName(libNHBR_ge__UnitDataType_Unit, lp_unit, lp_index), lp_value);
}

unit libNHBR_gf_UnitStoredForUnit (unit lp_unit, int lp_index) {
    // Automatic Variable Declarations
    // Implementation
    return DataTableGetUnit(true, libNHBR_gf__UnitDataName(libNHBR_ge__UnitDataType_Unit, lp_unit, lp_index));
}

void libNHBR_gf_StoreUnitGroupForUnit (unit lp_unit, int lp_index, unitgroup lp_value) {
    // Automatic Variable Declarations
    // Implementation
    DataTableSetUnitGroup(true, libNHBR_gf__UnitDataName(libNHBR_ge__UnitDataType_UnitGroup, lp_unit, lp_index), lp_value);
}

unitgroup libNHBR_gf_UnitGroupStoredForUnit (unit lp_unit, int lp_index) {
    // Automatic Variable Declarations
    // Implementation
    return DataTableGetUnitGroup(true, libNHBR_gf__UnitDataName(libNHBR_ge__UnitDataType_UnitGroup, lp_unit, lp_index));
}

void libNHBR_gf_RemoveDataFromUnit (string lp__UnitDataName, unit lp_unit) {
    // Automatic Variable Declarations
    // Implementation
    DataTableValueRemove(true, lp__UnitDataName);
}

void libNHBR_gf_UpgradeButtontoButtonForPlayer (string lp_sourceButton, string lp_targetButton, int lp_player) {
    // Automatic Variable Declarations
    // Implementation
    CatalogFieldValueSet(c_gameCatalogButton, lp_sourceButton, "AlertIcon", lp_player, CatalogFieldValueGet(c_gameCatalogButton, lp_targetButton, "AlertIcon", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogButton, lp_sourceButton, "AlertName", lp_player, CatalogFieldValueGet(c_gameCatalogButton, lp_targetButton, "AlertName", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogButton, lp_sourceButton, "AlertTooltip", lp_player, CatalogFieldValueGet(c_gameCatalogButton, lp_targetButton, "AlertTooltip", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogButton, lp_sourceButton, "Icon", lp_player, CatalogFieldValueGet(c_gameCatalogButton, lp_targetButton, "Icon", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogButton, lp_sourceButton, "Name", lp_player, CatalogFieldValueGet(c_gameCatalogButton, lp_targetButton, "Name", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogButton, lp_sourceButton, "Tooltip", lp_player, CatalogFieldValueGet(c_gameCatalogButton, lp_targetButton, "Tooltip", c_playerAny));
}

bool libNHBR_gf_RunValidatorOnUnit (string lp_validator, unit lp_sourceUnit, unit lp_targetUnit) {
    // Automatic Variable Declarations
    // Implementation
    return (ValidatorExecute(lp_validator, lp_sourceUnit, lp_targetUnit) == 0);
}

// Triggers
//--------------------------------------------------------------------------------------------------
// Trigger: Initialize Network Hybrid Race
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_InitializeNetworkHybridRace_Func (bool testConds, bool runActions) {
    // Automatic Variable Declarations
    playergroup autoB09074D1_g;
    int autoB09074D1_var;

    // Actions
    if (!runActions) {
        return true;
    }

    autoB09074D1_g = PlayerGroupAll();
    autoB09074D1_var = -1;
    while (true) {
        autoB09074D1_var = PlayerGroupNextPlayer(autoB09074D1_g, autoB09074D1_var);
        if (autoB09074D1_var < 0) { break; }
        if ((PlayerRace(autoB09074D1_var) == "NHbr")) {
            TechTreeUpgradeAddLevel(autoB09074D1_var, "NHbrSpray", 1);
        }

    }
    UnitEventSetNullVariableInvalid(true);
    TriggerExecute(libNHBR_gt_HybridTimeScaleBuffInitialization, true, false);
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffCommonConstructionCanceled, true);
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffCommonConstructionCompleted, true);
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffCommonConstructionStarted, true);
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffMinionConstructionPaused, true);
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffMinionConstructionResumed, true);
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffStructureTrainingCancelled, true);
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffStructureTrainingCompleted, true);
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffStructureTrainingStarted, true);
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffStructureResearchCancelled, true);
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffStructureResearchCompleted, true);
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffStructureResearchStarted, true);
    TriggerExecute(libNHBR_gt_HybridNetworkPowerSourceUnitTypeInitialization, true, false);
    TriggerEnable(libNHBR_gt_HybridProtectionUpdateArmorDataProperty, true);
    TriggerEnable(libNHBR_gt_HybridDominatorUpgradeToAdvancedDominator, true);
    TriggerEnable(libNHBR_gt_HybridReaverUpgradeToAdvancedReaver, true);
    TriggerEnable(libNHBR_gt_HybridNemesisUpgradeToAdvancedNemesis, true);
    TriggerExecute(libNHBR_gt_HybridTeleportOverrideTPTime, true, false);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_InitializeNetworkHybridRace_Init () {
    libNHBR_gt_InitializeNetworkHybridRace = TriggerCreate("libNHBR_gt_InitializeNetworkHybridRace_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Network New - Calculate
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridNetworkNewCalculate_Func (bool testConds, bool runActions) {
    // Variable Declarations
    int lv_player;
    unit lv_powerSource;
    int lv_chargedAmount;
    int lv_nonChargedAmount;
    unitgroup lv_powerSources;
    int lv_itPowerSourceUnitType;

    // Automatic Variable Declarations
    const int auto22AB836C_ae = libNHBR_gv_hybridNetworkPowerSourceUnitTypeMaxCount_C;
    const int auto22AB836C_ai = 1;
    unitgroup auto403B34CA_g;
    int auto403B34CA_u;
    unit auto403B34CA_var;
    unitgroup auto194BCFF4_g;
    int auto194BCFF4_u;

    // Variable Initialization
    lv_player = EventPlayer();
    lv_powerSource = EventUnit();
    lv_powerSources = UnitGroupEmpty();

    // Actions
    if (!runActions) {
        return true;
    }

    lv_itPowerSourceUnitType = 1;
    for ( ; ( (auto22AB836C_ai >= 0 && lv_itPowerSourceUnitType <= auto22AB836C_ae) || (auto22AB836C_ai < 0 && lv_itPowerSourceUnitType >= auto22AB836C_ae) ) ; lv_itPowerSourceUnitType += auto22AB836C_ai ) {
        auto403B34CA_g = UnitGroup(libNHBR_gv_hybridNetworkPowerSourceUnitType[lv_itPowerSourceUnitType], lv_player, RegionEntireMap(), UnitFilter(0, 0, (1 << c_targetFilterMissile), (1 << (c_targetFilterUnderConstruction - 32)) | (1 << (c_targetFilterDead - 32)) | (1 << (c_targetFilterHidden - 32))), 0);
        auto403B34CA_u = UnitGroupCount(auto403B34CA_g, c_unitCountAll);
        for (;; auto403B34CA_u -= 1) {
            auto403B34CA_var = UnitGroupUnitFromEnd(auto403B34CA_g, auto403B34CA_u);
            if (auto403B34CA_var == null) { break; }
            UnitGroupAdd(lv_powerSources, auto403B34CA_var);
        }
    }
    libNHBR_gv_hybridNetworkNewPowerSourceUnitGroup[lv_player] = lv_powerSources;
    auto194BCFF4_g = lv_powerSources;
    auto194BCFF4_u = UnitGroupCount(auto194BCFF4_g, c_unitCountAll);
    for (;; auto194BCFF4_u -= 1) {
        lv_powerSource = UnitGroupUnitFromEnd(auto194BCFF4_g, auto194BCFF4_u);
        if (lv_powerSource == null) { break; }
        if ((UnitHasBehavior2(lv_powerSource, "NHbrNetworkCharging@Charged") == true)) {
            lv_chargedAmount += 1;
        }
        else {
            lv_nonChargedAmount += 1;
        }
    }
    if ((lv_chargedAmount > libNHBR_gv_hybridNetworkMaximumPowerSourcesInNetwork)) {
        libNHBR_gv_hybridNetworkNewCurrentChargedAmount[lv_player] = libNHBR_gv_hybridNetworkMaximumPowerSourcesInNetwork;
    }
    else {
        libNHBR_gv_hybridNetworkNewCurrentChargedAmount[lv_player] = lv_chargedAmount;
    }
    lv_nonChargedAmount = MinI((libNHBR_gv_hybridNetworkMaximumPowerSourcesInNetwork - lv_chargedAmount), lv_nonChargedAmount);
    if ((libNHBR_gv_hybridNetworkNewCurrentChargedAmount[lv_player] > libNHBR_gv_hybridNetworkMaximumPowerSourcesInNetwork)) {
        lv_chargedAmount = libNHBR_gv_hybridNetworkMaximumPowerSourcesInNetwork;
    }
    else {
        lv_chargedAmount = libNHBR_gv_hybridNetworkNewCurrentChargedAmount[lv_player];
    }
    CatalogFieldValueSet(c_gameCatalogAccumulator, ("NHbrNetworkNEW@PowerSourceChargedAdd"), "Amount", lv_player, IntToString(lv_chargedAmount));
    CatalogFieldValueSet(c_gameCatalogAccumulator, ("NHbrNetworkNEW@PowerSourceChargedMultiply"), "Amount", lv_player, IntToString(lv_chargedAmount));
    CatalogFieldValueSet(c_gameCatalogAccumulator, ("NHbrNetworkNEW@PowerSourceNonChargedAdd"), "Amount", lv_player, IntToString(lv_nonChargedAmount));
    CatalogFieldValueSet(c_gameCatalogAccumulator, ("NHbrNetworkNEW@PowerSourceNonChargedMultiply"), "Amount", lv_player, IntToString(lv_nonChargedAmount));
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridNetworkNewCalculate_Init () {
    libNHBR_gt_HybridNetworkNewCalculate = TriggerCreate("libNHBR_gt_HybridNetworkNewCalculate_Func");
    TriggerAddEventUnitBehaviorChange(libNHBR_gt_HybridNetworkNewCalculate, null, "NHbrNetworkCharging@Charged", c_unitBehaviorChangeActivate);
    TriggerAddEventUnitBehaviorChange(libNHBR_gt_HybridNetworkNewCalculate, null, "NHbrNetworkCharging@Charged", c_unitBehaviorChangeDeactivate);
    TriggerAddEventUnitBehaviorChange(libNHBR_gt_HybridNetworkNewCalculate, null, "NHbrNetworkCharging", c_unitBehaviorChangeActivate);
    TriggerAddEventUnitBehaviorChange(libNHBR_gt_HybridNetworkNewCalculate, null, "NHbrNetworkCharging", c_unitBehaviorChangeDeactivate);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Network - Power Source Unit Type Initialization
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridNetworkPowerSourceUnitTypeInitialization_Func (bool testConds, bool runActions) {
    // Variable Declarations
    int lv_itUnitType;

    // Automatic Variable Declarations
    // Variable Initialization

    // Actions
    if (!runActions) {
        return true;
    }

    lv_itUnitType += 1;
    libNHBR_gv_hybridNetworkPowerSourceUnitType[lv_itUnitType] = "NHbrIonicCrystal";
    lv_itUnitType += 1;
    libNHBR_gv_hybridNetworkPowerSourceUnitType[lv_itUnitType] = "NHbrIonicCrystal@Moveable";
    lv_itUnitType += 1;
    libNHBR_gv_hybridNetworkPowerSourceUnitType[lv_itUnitType] = "NHbrNavigator";
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridNetworkPowerSourceUnitTypeInitialization_Init () {
    libNHBR_gt_HybridNetworkPowerSourceUnitTypeInitialization = TriggerCreate("libNHBR_gt_HybridNetworkPowerSourceUnitTypeInitialization_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Network New - Case Controller
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridNetworkNewCaseController_Func (bool testConds, bool runActions) {
    // Variable Declarations
    int lv_player;
    string lv_unitType;

    // Automatic Variable Declarations
    string auto40B2DE4C_val;

    // Variable Initialization
    lv_player = EventPlayer();
    lv_unitType = UnitGetType(EventUnit());

    // Actions
    if (!runActions) {
        return true;
    }

    auto40B2DE4C_val = lv_unitType;
    if (auto40B2DE4C_val == "NHbrStasisCell") {
        if ((EventUnitBehaviorChange() == c_unitBehaviorChangeActivate)) {
            libNHBR_gv_hybridNetworkNewCaseControllerStasisCell[lv_player] += 1;
        }
        else {
            libNHBR_gv_hybridNetworkNewCaseControllerStasisCell[lv_player] -= 1;
        }
        if ((libNHBR_gv_hybridNetworkNewCaseControllerStasisCell[lv_player] > 0)) {
            libNtve_gf_SetUpgradeLevelForPlayer(lv_player, "NHbrStasisCell@StasisCell", 1);
        }
        else {
            libNtve_gf_SetUpgradeLevelForPlayer(lv_player, "NHbrStasisCell@StasisCell", 0);
        }
    }
    else if (auto40B2DE4C_val == "NHbrProcessingCore") {
        if ((EventUnitBehaviorChange() == c_unitBehaviorChangeActivate)) {
            libNHBR_gv_hybridNetworkNewCaseControllerProcessingCore[lv_player] += 1;
        }
        else {
            libNHBR_gv_hybridNetworkNewCaseControllerProcessingCore[lv_player] -= 1;
        }
        if ((libNHBR_gv_hybridNetworkNewCaseControllerProcessingCore[lv_player] > 0)) {
            libNtve_gf_SetUpgradeLevelForPlayer(lv_player, "NHbrProcessingCore", 1);
        }
        else {
            libNtve_gf_SetUpgradeLevelForPlayer(lv_player, "NHbrProcessingCore", 0);
        }
    }
    else if (auto40B2DE4C_val == "NHbrCrystallicShrine") {
        if ((EventUnitBehaviorChange() == c_unitBehaviorChangeActivate)) {
            libNHBR_gv_hybridNetworkNewCaseControllerCrystallicShrine[lv_player] += 1;
        }
        else {
            libNHBR_gv_hybridNetworkNewCaseControllerCrystallicShrine[lv_player] -= 1;
        }
        if ((libNHBR_gv_hybridNetworkNewCaseControllerCrystallicShrine[lv_player] > 0)) {
            libNtve_gf_SetUpgradeLevelForPlayer(lv_player, "NHbrCrystallicShrine", 1);
        }
        else {
            libNtve_gf_SetUpgradeLevelForPlayer(lv_player, "NHbrCrystallicShrine", 0);
        }
    }
    else {
    }
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridNetworkNewCaseController_Init () {
    libNHBR_gt_HybridNetworkNewCaseController = TriggerCreate("libNHBR_gt_HybridNetworkNewCaseController_Func");
    TriggerAddEventUnitBehaviorChange(libNHBR_gt_HybridNetworkNewCaseController, null, "NHbrNetworkNEW@NetworkController", c_unitBehaviorChangeActivate);
    TriggerAddEventUnitBehaviorChange(libNHBR_gt_HybridNetworkNewCaseController, null, "NHbrNetworkNEW@NetworkController", c_unitBehaviorChangeDeactivate);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Network New - Case Controller (Removed)
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridNetworkNewCaseControllerRemoved_Func (bool testConds, bool runActions) {
    // Variable Declarations
    int lv_player;
    string lv_unitType;

    // Automatic Variable Declarations
    string auto1747BF75_val;

    // Variable Initialization
    lv_player = EventPlayer();
    lv_unitType = UnitGetType(EventUnit());

    // Actions
    if (!runActions) {
        return true;
    }

    auto1747BF75_val = lv_unitType;
    if (auto1747BF75_val == "NHbrStasisCell") {
        libNHBR_gv_hybridNetworkNewCaseControllerStasisCell[lv_player] -= 1;
        if ((libNHBR_gv_hybridNetworkNewCaseControllerStasisCell[lv_player] > 0)) {
            libNtve_gf_SetUpgradeLevelForPlayer(lv_player, "NHbrStasisCell@StasisCell", 1);
        }
        else {
            libNtve_gf_SetUpgradeLevelForPlayer(lv_player, "NHbrStasisCell@StasisCell", 0);
        }
    }
    else if (auto1747BF75_val == "NHbrProcessingCore") {
        libNHBR_gv_hybridNetworkNewCaseControllerProcessingCore[lv_player] -= 1;
        if ((libNHBR_gv_hybridNetworkNewCaseControllerProcessingCore[lv_player] > 0)) {
            libNtve_gf_SetUpgradeLevelForPlayer(lv_player, "NHbrProcessingCore", 1);
        }
        else {
            libNtve_gf_SetUpgradeLevelForPlayer(lv_player, "NHbrProcessingCore", 0);
        }
    }
    else if (auto1747BF75_val == "NHbrCrystallicShrine") {
        libNHBR_gv_hybridNetworkNewCaseControllerCrystallicShrine[lv_player] -= 1;
        if ((libNHBR_gv_hybridNetworkNewCaseControllerCrystallicShrine[lv_player] > 0)) {
            libNtve_gf_SetUpgradeLevelForPlayer(lv_player, "NHbrCrystallicShrine", 1);
        }
        else {
            libNtve_gf_SetUpgradeLevelForPlayer(lv_player, "NHbrCrystallicShrine", 0);
        }
    }
    else {
    }
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridNetworkNewCaseControllerRemoved_Init () {
    libNHBR_gt_HybridNetworkNewCaseControllerRemoved = TriggerCreate("libNHBR_gt_HybridNetworkNewCaseControllerRemoved_Func");
    TriggerAddEventUnitRemoved(libNHBR_gt_HybridNetworkNewCaseControllerRemoved, null);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Protection - Update Armor Data - Property
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridProtectionUpdateArmorDataProperty_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_hybridUnit;
    fixed lv_shieldSpellArmor;
    fixed lv_shields;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_hybridUnit = EventUnit();

    // Conditions
    if (testConds) {
        if (!((UnitTypeTestFlag(UnitGetType(lv_hybridUnit), c_unitFlagMissile) == false))) {
            return false;
        }

        if (!((CatalogFieldValueGet(c_gameCatalogUnit, UnitGetType(lv_hybridUnit), "Race", c_playerAny) == "NHbr"))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    lv_shieldSpellArmor = UnitGetPropertyFixed(lv_hybridUnit, c_unitPropShieldArmor, c_unitPropCurrent);
    lv_shields = UnitGetPropertyFixed(lv_hybridUnit, c_unitPropShields, c_unitPropCurrent);
    if ((lv_shields < lv_shieldSpellArmor)) {
        lv_shieldSpellArmor = lv_shields;
    }

    UnitSetCustomValue(lv_hybridUnit, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_ProtectionSpellArmor), lv_shieldSpellArmor);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridProtectionUpdateArmorDataProperty_Init () {
    libNHBR_gt_HybridProtectionUpdateArmorDataProperty = TriggerCreate("libNHBR_gt_HybridProtectionUpdateArmorDataProperty_Func");
    TriggerEnable(libNHBR_gt_HybridProtectionUpdateArmorDataProperty, false);
    TriggerAddEventUnitProperty(libNHBR_gt_HybridProtectionUpdateArmorDataProperty, null, c_unitPropShieldArmor);
    TriggerAddEventUnitRegion(libNHBR_gt_HybridProtectionUpdateArmorDataProperty, null, RegionEntireMap(), true);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Teleport - Override TP Time
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridTeleportOverrideTPTime_Func (bool testConds, bool runActions) {
    // Variable Declarations
    int lv_itPlayer;
    string lv_itUnitType;
    int lv_itField;

    // Automatic Variable Declarations
    const int auto9DDEF7EA_ae = libNHBR_gv_bALMaxEnginePlayerCount;
    const int auto9DDEF7EA_ai = 1;
    const int auto7AD4EE7E_ae = 29;
    const int auto7AD4EE7E_ai = 1;

    // Variable Initialization

    // Actions
    if (!runActions) {
        return true;
    }

    lv_itPlayer = 0;
    for ( ; ( (auto9DDEF7EA_ai >= 0 && lv_itPlayer <= auto9DDEF7EA_ae) || (auto9DDEF7EA_ai < 0 && lv_itPlayer >= auto9DDEF7EA_ae) ) ; lv_itPlayer += auto9DDEF7EA_ai ) {
        lv_itField = 0;
        for ( ; ( (auto7AD4EE7E_ai >= 0 && lv_itField <= auto7AD4EE7E_ae) || (auto7AD4EE7E_ai < 0 && lv_itField >= auto7AD4EE7E_ae) ) ; lv_itField += auto7AD4EE7E_ai ) {
            lv_itUnitType = (CatalogFieldValueGet(c_gameCatalogAbil, ("NHbrIonicCrystalTeleport@Build"), "InfoArray[" + IntToString(lv_itField) + "].Unit", c_playerAny));
            if ((lv_itUnitType != null)) {
                CatalogFieldValueSet(c_gameCatalogAbil, ("NHbrIonicCrystalTeleport@Build"), "InfoArray[" + IntToString(lv_itField) + "].Time", lv_itPlayer, FixedToString(libNHBR_gv_hybridTeleportConstructionTime, c_fixedPrecisionAny));
            }

        }
    }
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridTeleportOverrideTPTime_Init () {
    libNHBR_gt_HybridTeleportOverrideTPTime = TriggerCreate("libNHBR_gt_HybridTeleportOverrideTPTime_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Teleport - Turn Targeting Order On
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridTeleportTurnTargetingOrderOn_Func (bool testConds, bool runActions) {
    // Variable Declarations
    int lv_player;
    unit lv_targetUnit;
    unit lv_casterUnit;
    string lv_targetUnitType;
    order lv_order;

    // Automatic Variable Declarations
    string autoC94CA30A_val;
    unitgroup auto961471E1_g;
    int auto961471E1_u;
    unit auto961471E1_var;

    // Variable Initialization
    lv_player = EventPlayer();
    lv_targetUnit = EventPlayerEffectUsedUnit(c_effectUnitTarget);
    lv_casterUnit = EventPlayerEffectUsedUnit(c_effectUnitCaster);
    lv_targetUnitType = UnitGetType(lv_targetUnit);

    // Actions
    if (!runActions) {
        return true;
    }

    UnitSetPropertyFixed(lv_casterUnit, c_unitPropEnergy, 100.0);
    libNHBR_gv_hybridTeleportUnitGroup[lv_player] = libNtve_gf_ConvertUnitToUnitGroup(lv_casterUnit);
    UnitBehaviorAdd(lv_casterUnit, "NHbrIonicCrystalTeleport@FromTargetToCrystal", lv_targetUnit, 1);
    UnitBehaviorAdd(lv_targetUnit, "NHbrIonicCrystalTeleport@FromPylonToTarget", lv_casterUnit, 1);
    autoC94CA30A_val = lv_targetUnitType;
    if (autoC94CA30A_val == "NHbrTemple") {
        UnitBehaviorAdd(lv_casterUnit, "NHbr@TeleportTemple", lv_casterUnit, 1);
        lv_order = OrderTargetingPoint(AbilityCommand("NHbrIonicCrystalTeleport@Build", 0), UnitGetPosition(lv_casterUnit));
    }
    else if (autoC94CA30A_val == "NHbrHarvester") {
        UnitBehaviorAdd(lv_casterUnit, "NHbr@TeleportHarvester", lv_casterUnit, 1);
        lv_order = OrderTargetingUnit(AbilityCommand("NHbrIonicCrystalTeleport@Build", 1), lv_casterUnit);
    }
    else if (autoC94CA30A_val == "NHbrHarvesterRich") {
        UnitBehaviorAdd(lv_casterUnit, "NHbr@TeleportHarvesterRich", lv_casterUnit, 1);
        lv_order = OrderTargetingUnit(AbilityCommand("NHbrIonicCrystalTeleport@Build", 1), lv_casterUnit);
    }
    else if (autoC94CA30A_val == "NHbrVoidRift") {
        UnitBehaviorAdd(lv_casterUnit, "NHbr@TeleportVoidRift", lv_casterUnit, 1);
        lv_order = OrderTargetingPoint(AbilityCommand("NHbrIonicCrystalTeleport@Build", 2), UnitGetPosition(lv_casterUnit));
    }
    else if (autoC94CA30A_val == "NHbrStasisCell") {
        UnitBehaviorAdd(lv_casterUnit, "NHbr@TeleportStasisCell", lv_casterUnit, 1);
        lv_order = OrderTargetingPoint(AbilityCommand("NHbrIonicCrystalTeleport@Build", 3), UnitGetPosition(lv_casterUnit));
    }
    else if (autoC94CA30A_val == "NHbrVespeneConcentrator") {
        UnitBehaviorAdd(lv_casterUnit, "NHbr@TeleportConcentrator", lv_casterUnit, 1);
        lv_order = OrderTargetingPoint(AbilityCommand("NHbrIonicCrystalTeleport@Build", 4), UnitGetPosition(lv_casterUnit));
    }
    else if (autoC94CA30A_val == "NHbrConstruct@AntiAir") {
        UnitBehaviorAdd(lv_casterUnit, "NHbr@TeleportConstructAA", lv_casterUnit, 1);
        lv_order = OrderTargetingPoint(AbilityCommand("NHbrIonicCrystalTeleport@Build", 5), UnitGetPosition(lv_casterUnit));
    }
    else if (autoC94CA30A_val == "NHbrConstruct@AntiGround") {
        UnitBehaviorAdd(lv_casterUnit, "NHbr@TeleportConstructAG", lv_casterUnit, 1);
        lv_order = OrderTargetingPoint(AbilityCommand("NHbrIonicCrystalTeleport@Build", 6), UnitGetPosition(lv_casterUnit));
    }
    else if (autoC94CA30A_val == "NHbrEngine") {
        UnitBehaviorAdd(lv_casterUnit, "NHbr@TeleportEngine", lv_casterUnit, 1);
        lv_order = OrderTargetingPoint(AbilityCommand("NHbrIonicCrystalTeleport@Build", 7), UnitGetPosition(lv_casterUnit));
    }
    else if (autoC94CA30A_val == "NHbrProcessingCore") {
        UnitBehaviorAdd(lv_casterUnit, "NHbr@TeleportProcessingCore", lv_casterUnit, 1);
        lv_order = OrderTargetingPoint(AbilityCommand("NHbrIonicCrystalTeleport@Build", 8), UnitGetPosition(lv_casterUnit));
    }
    else if (autoC94CA30A_val == "NHbrProcessor") {
        UnitBehaviorAdd(lv_casterUnit, "NHbr@TeleportProcessor", lv_casterUnit, 1);
        lv_order = OrderTargetingPoint(AbilityCommand("NHbrIonicCrystalTeleport@Build", 9), UnitGetPosition(lv_casterUnit));
    }
    else if (autoC94CA30A_val == "NHbrVoidPortal") {
        UnitBehaviorAdd(lv_casterUnit, "NHbr@TeleportVoidPortal", lv_casterUnit, 1);
        lv_order = OrderTargetingPoint(AbilityCommand("NHbrIonicCrystalTeleport@Build", 10), UnitGetPosition(lv_casterUnit));
    }
    else if (autoC94CA30A_val == "NHbrCrystallicShrine") {
        UnitBehaviorAdd(lv_casterUnit, "NHbr@TeleportCrystallicShrine", lv_casterUnit, 1);
        lv_order = OrderTargetingPoint(AbilityCommand("NHbrIonicCrystalTeleport@Build", 11), UnitGetPosition(lv_casterUnit));
    }
    else if (autoC94CA30A_val == "NHbrNemesisCatacomb") {
        UnitBehaviorAdd(lv_casterUnit, "NHbr@TeleportNemesisCatacomb", lv_casterUnit, 1);
        lv_order = OrderTargetingPoint(AbilityCommand("NHbrIonicCrystalTeleport@Build", 12), UnitGetPosition(lv_casterUnit));
    }
    else {
    }
    if ((lv_order != null)) {
        UISetTargetingOrder(PlayerGroupSingle(lv_player), libNHBR_gv_hybridTeleportUnitGroup[lv_player], lv_order, false);
        auto961471E1_g = libNHBR_gv_hybridNetworkNewPowerSourceUnitGroup[lv_player];
        auto961471E1_u = UnitGroupCount(auto961471E1_g, c_unitCountAll);
        for (;; auto961471E1_u -= 1) {
            auto961471E1_var = UnitGroupUnitFromEnd(auto961471E1_g, auto961471E1_u);
            if (auto961471E1_var == null) { break; }
            libNtve_gf_SendActorMessageToUnit(auto961471E1_var, "StatusIncrement Placement");
        }
    }

    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridTeleportTurnTargetingOrderOn_Init () {
    libNHBR_gt_HybridTeleportTurnTargetingOrderOn = TriggerCreate("libNHBR_gt_HybridTeleportTurnTargetingOrderOn_Func");
    TriggerAddEventPlayerEffectUsed(libNHBR_gt_HybridTeleportTurnTargetingOrderOn, c_playerAny, "NHbrIonicCrystalTeleport@CrystalInitialSet");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Teleport - Turn Targeting Order Off
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridTeleportTurnTargetingOrderOff_Func (bool testConds, bool runActions) {
    // Variable Declarations
    int lv_player;
    unit lv_crystal;
    unit lv_builder;
    fixed lv_energyToRemove;
    fixed lv_totalBuildTime;
    fixed lv_energyUsage;

    // Automatic Variable Declarations
    unitgroup auto19A3CA45_g;
    int auto19A3CA45_u;
    unit auto19A3CA45_var;

    // Variable Initialization

    // Actions
    if (!runActions) {
        return true;
    }

    lv_player = EventPlayer();
    lv_crystal = UnitGroupUnit(libNHBR_gv_hybridTeleportUnitGroup[lv_player], 1);
    lv_builder = UnitBehaviorEffectUnit(lv_crystal, "NHbrIonicCrystalTeleport@FromTargetToCrystal", c_effectUnitCaster, 0);
    UnitBehaviorRemove(lv_crystal, "NHbr@TeleportConcentrator", 1);
    UnitBehaviorRemove(lv_crystal, "NHbr@TeleportConstructAA", 1);
    UnitBehaviorRemove(lv_crystal, "NHbr@TeleportConstructAG", 1);
    UnitBehaviorRemove(lv_crystal, "NHbr@TeleportCrystallicShrine", 1);
    UnitBehaviorRemove(lv_crystal, "NHbr@TeleportEngine", 1);
    UnitBehaviorRemove(lv_crystal, "NHbr@TeleportHarvester", 1);
    UnitBehaviorRemove(lv_crystal, "NHbr@TeleportHarvesterRich", 1);
    UnitBehaviorRemove(lv_crystal, "NHbr@TeleportNemesisCatacomb", 1);
    UnitBehaviorRemove(lv_crystal, "NHbr@TeleportProcessingCore", 1);
    UnitBehaviorRemove(lv_crystal, "NHbr@TeleportProcessor", 1);
    UnitBehaviorRemove(lv_crystal, "NHbr@TeleportStasisCell", 1);
    UnitBehaviorRemove(lv_crystal, "NHbr@TeleportTemple", 1);
    UnitBehaviorRemove(lv_crystal, "NHbr@TeleportVoidPortal", 1);
    UnitBehaviorRemove(lv_crystal, "NHbr@TeleportVoidRift", 1);
    auto19A3CA45_g = libNHBR_gv_hybridNetworkNewPowerSourceUnitGroup[lv_player];
    auto19A3CA45_u = UnitGroupCount(auto19A3CA45_g, c_unitCountAll);
    for (;; auto19A3CA45_u -= 1) {
        auto19A3CA45_var = UnitGroupUnitFromEnd(auto19A3CA45_g, auto19A3CA45_u);
        if (auto19A3CA45_var == null) { break; }
        libNtve_gf_SendActorMessageToUnit(auto19A3CA45_var, "StatusDecrement Placement");
    }
    if ((OrderGetAbilityCommand(UnitOrder(lv_crystal, 0)) != EventTargetModeAbilCmd())) {
        UnitBehaviorRemove(lv_crystal, "NHbrIonicCrystalTeleport@FromTargetToCrystal", 1);
        UnitBehaviorRemove(lv_builder, "NHbrIonicCrystalTeleport@FromPylonToTarget", 1);
    }

    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridTeleportTurnTargetingOrderOff_Init () {
    libNHBR_gt_HybridTeleportTurnTargetingOrderOff = TriggerCreate("libNHBR_gt_HybridTeleportTurnTargetingOrderOff_Func");
    TriggerAddEventTargetModeUpdate(libNHBR_gt_HybridTeleportTurnTargetingOrderOff, c_playerAny, AbilityCommand("NHbrIonicCrystalTeleport@Build", 4), c_targetModeStateOff);
    TriggerAddEventTargetModeUpdate(libNHBR_gt_HybridTeleportTurnTargetingOrderOff, c_playerAny, AbilityCommand("NHbrIonicCrystalTeleport@Build", 5), c_targetModeStateOff);
    TriggerAddEventTargetModeUpdate(libNHBR_gt_HybridTeleportTurnTargetingOrderOff, c_playerAny, AbilityCommand("NHbrIonicCrystalTeleport@Build", 10), c_targetModeStateOff);
    TriggerAddEventTargetModeUpdate(libNHBR_gt_HybridTeleportTurnTargetingOrderOff, c_playerAny, AbilityCommand("NHbrIonicCrystalTeleport@Build", 6), c_targetModeStateOff);
    TriggerAddEventTargetModeUpdate(libNHBR_gt_HybridTeleportTurnTargetingOrderOff, c_playerAny, AbilityCommand("NHbrIonicCrystalTeleport@Build", 11), c_targetModeStateOff);
    TriggerAddEventTargetModeUpdate(libNHBR_gt_HybridTeleportTurnTargetingOrderOff, c_playerAny, AbilityCommand("NHbrIonicCrystalTeleport@Build", 7), c_targetModeStateOff);
    TriggerAddEventTargetModeUpdate(libNHBR_gt_HybridTeleportTurnTargetingOrderOff, c_playerAny, AbilityCommand("NHbrIonicCrystalTeleport@Build", 8), c_targetModeStateOff);
    TriggerAddEventTargetModeUpdate(libNHBR_gt_HybridTeleportTurnTargetingOrderOff, c_playerAny, AbilityCommand("NHbrIonicCrystalTeleport@Build", 2), c_targetModeStateOff);
    TriggerAddEventTargetModeUpdate(libNHBR_gt_HybridTeleportTurnTargetingOrderOff, c_playerAny, AbilityCommand("NHbrIonicCrystalTeleport@Build", 0), c_targetModeStateOff);
    TriggerAddEventTargetModeUpdate(libNHBR_gt_HybridTeleportTurnTargetingOrderOff, c_playerAny, AbilityCommand("NHbrIonicCrystalTeleport@Build", 3), c_targetModeStateOff);
    TriggerAddEventTargetModeUpdate(libNHBR_gt_HybridTeleportTurnTargetingOrderOff, c_playerAny, AbilityCommand("NHbrIonicCrystalTeleport@Build", 9), c_targetModeStateOff);
    TriggerAddEventTargetModeUpdate(libNHBR_gt_HybridTeleportTurnTargetingOrderOff, c_playerAny, AbilityCommand("NHbrIonicCrystalTeleport@Build", 1), c_targetModeStateOff);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Teleport - Construction Progress
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridTeleportConstructionProgress_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_targetStructure;
    unit lv_builder;
    unit lv_ionicCrystalUnit;
    fixed lv_energyUsage;
    fixed lv_drainedEnergyValue;
    bool lv_builderIsStructure;
    fixed lv_progress;
    fixed lv_totalBuildTime;
    fixed lv_oldProgress;
    point lv_targetPoint;
    bool[10] lv_inControlGroup;
    int lv_owner;
    int lv_killsCount;

    // Automatic Variable Declarations
    const int auto0A044625_n = 5;
    int auto0A044625_i;
    const int auto4B532101_ae = 9;
    int auto4B532101_var;
    const int auto62C7905C_ae = 9;
    int auto62C7905C_var;

    // Variable Initialization
    lv_ionicCrystalUnit = EventUnit();

    // Conditions
    if (testConds) {
        if (!((libNHBR_gf_RunValidatorOnUnit("RequiresHybrid", lv_ionicCrystalUnit, lv_ionicCrystalUnit) == true))) {
            return false;
        }

        if (!((UnitGetType(lv_ionicCrystalUnit) == "NHbrIonicCrystal"))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    lv_owner = UnitGetOwner(EventUnit());
    UnitBehaviorAdd(lv_ionicCrystalUnit, "NHbrTimeScaleBuff@EnergyRegenSupressed", lv_ionicCrystalUnit, 1);
    UnitBehaviorAdd(lv_builder, "NHbrTimeScaleBuff@EnergyRegenSupressed", lv_builder, 1);
    lv_builder = UnitBehaviorEffectUnit(lv_ionicCrystalUnit, "NHbrIonicCrystalTeleport@FromTargetToCrystal", c_effectUnitCaster, 0);
    for (auto0A044625_i = 1; auto0A044625_i <= auto0A044625_n; auto0A044625_i += 1) {
        UnitIssueOrder(lv_builder, Order(AbilityCommand("que5", 0)), c_orderQueueReplace);
    }
    lv_targetStructure = EventUnitProgressUnit();
    lv_targetPoint = UnitGetPosition(lv_targetStructure);
    UnitBehaviorAdd(lv_targetStructure, "NHbrIonicCrystalTeleport@Invulnerability", lv_builder, 1);
    UnitBehaviorAdd(lv_builder, "NHbrIonicCrystalTeleport@BuilderSilence", lv_builder, 1);
    UnitSetCustomValue(lv_ionicCrystalUnit, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage), 0.0);
    UnitSetCustomValue(lv_ionicCrystalUnit, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleDrainingEnergy), 0.0);
    lv_energyUsage = UnitGetPropertyFixed(lv_ionicCrystalUnit, c_unitPropEnergyMax, c_unitPropCurrent);
    lv_totalBuildTime = libNHBR_gv_hybridTeleportConstructionTime;
    lv_drainedEnergyValue = ((lv_energyUsage/lv_totalBuildTime)/32);
    UnitSetCustomValue(lv_ionicCrystalUnit, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleDrainingEnergy), lv_drainedEnergyValue);
    UnitCreateEffectUnit(lv_ionicCrystalUnit, "NHbrIonicCrystalTeleport@PersistentBuilder", lv_builder);
    libNtve_gf_SendActorMessageToUnit(lv_builder, "SetOpacity 0.650000 3.000000");
    while (true) {
        Wait(0.0, c_timeGame);
        lv_oldProgress = lv_progress;
        lv_progress = UnitOrderGetProgress(lv_ionicCrystalUnit);
        UnitSetPropertyFixed(lv_targetStructure, c_unitPropLife, UnitGetPropertyFixed(lv_builder, c_unitPropLife, c_unitPropCurrent));
        UnitSetPropertyFixed(lv_targetStructure, c_unitPropShields, UnitGetPropertyFixed(lv_builder, c_unitPropShields, c_unitPropCurrent));
        UnitSetPropertyFixed(lv_targetStructure, c_unitPropEnergy, UnitGetPropertyFixed(lv_builder, c_unitPropEnergy, c_unitPropCurrent));
        UnitCreateEffectUnit(lv_ionicCrystalUnit, "NHbrTimeScaleBuff@DrainingEnergy", lv_ionicCrystalUnit);
        if ((UnitOrderGetProgress(lv_ionicCrystalUnit) == 100.0)) {
            if (((lv_progress - lv_oldProgress) > 1.0)) {
                UnitBehaviorRemove(lv_builder, "NHbrTimeScaleBuff@EnergyRegenSupressed", 1);
                UnitBehaviorRemove(lv_builder, "NHbrIonicCrystalTeleport@FromPylonToTarget", 1);
                UnitBehaviorRemove(lv_builder, "NHbrIonicCrystalTeleport@BuilderSilence", 1);
                UnitBehaviorRemove(lv_ionicCrystalUnit, "NHbrTimeScaleBuff@EnergyRegenSupressed", 1);
                UnitBehaviorRemove(lv_ionicCrystalUnit, "NHbrIonicCrystalTeleport@FromTargetToCrystal", 1);
                break;
            }
            else {
                if ((UnitIsAlive(lv_ionicCrystalUnit) == true)) {
                    UnitBehaviorRemove(lv_builder, "NHbrTemple@Supplies", 1);
                    auto4B532101_var = 0;
                    for ( ; auto4B532101_var <= auto4B532101_ae; auto4B532101_var += 1 ) {
                        lv_inControlGroup[auto4B532101_var] = (UnitGroupHasUnit(UnitControlGroup(lv_owner, auto4B532101_var), lv_builder) == true);
                    }
                    UnitBehaviorRemove(lv_targetStructure, "NHbrIonicCrystalTeleport@Invulnerability", 1);
                    UnitBehaviorRemove(lv_ionicCrystalUnit, "NHbrTimeScaleBuff@EnergyRegenSupressed", 1);
                    UnitBehaviorRemove(lv_ionicCrystalUnit, "NHbrIonicCrystalTeleport@FromTargetToCrystal", 1);
                    UnitBehaviorAdd(lv_builder, "NHbrIonicCrystalTeleport@FadeBuff", lv_builder, 1);
                    auto62C7905C_var = 0;
                    for ( ; auto62C7905C_var <= auto62C7905C_ae; auto62C7905C_var += 1 ) {
                        if ((lv_inControlGroup[auto62C7905C_var] == true)) {
                            UnitControlGroupAddUnit(lv_owner, auto62C7905C_var, lv_targetStructure);
                        }

                    }

                    return true;
                }
                else {
                    UnitBehaviorRemove(lv_builder, "NHbrTimeScaleBuff@EnergyRegenSupressed", 1);
                    UnitBehaviorRemove(lv_builder, "NHbrIonicCrystalTeleport@FromPylonToTarget", 1);
                    UnitBehaviorRemove(lv_builder, "NHbrIonicCrystalTeleport@BuilderSilence", 1);
                    break;
                }
            }
        }

        if ((UnitIsAlive(lv_builder) == false)) {
            UnitCreateEffectUnit(lv_targetStructure, "NHbrIonicCrystalTeleport@Suicide", lv_targetStructure);
            UnitBehaviorRemove(lv_ionicCrystalUnit, "NHbrTimeScaleBuff@EnergyRegenSupressed", 1);
            UnitBehaviorRemove(lv_ionicCrystalUnit, "NHbrIonicCrystalTeleport@FromTargetToCrystal", 1);
            return true;
        }

        if ((UnitIsAlive(lv_targetStructure) == false)) {
            UnitBehaviorRemove(lv_ionicCrystalUnit, "NHbrTimeScaleBuff@EnergyRegenSupressed", 1);
            UnitBehaviorRemove(lv_ionicCrystalUnit, "NHbrIonicCrystalTeleport@FromTargetToCrystal", 1);
            UnitBehaviorRemove(lv_builder, "NHbrIonicCrystalTeleport@FromPylonToTarget", 1);
            UnitBehaviorRemove(lv_builder, "NHbrTimeScaleBuff@EnergyRegenSupressed", 1);
            break;
        }

    }
    libNtve_gf_SendActorMessageToUnit(lv_builder, "SetOpacity 1.000000 3.000000");
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridTeleportConstructionProgress_Init () {
    libNHBR_gt_HybridTeleportConstructionProgress = TriggerCreate("libNHBR_gt_HybridTeleportConstructionProgress_Func");
    TriggerAddEventUnitConstructProgress(libNHBR_gt_HybridTeleportConstructionProgress, null, c_unitProgressStageStart);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Teleport - Transfer Damage
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridTeleportTransferDamage_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_builder;
    fixed lv_damage;
    fixed lv_shields;
    fixed lv_life;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_builder = UnitBehaviorEffectUnit(EventUnit(), "NHbrIonicCrystalTeleport@Invulnerability", c_effectUnitCaster, 0);
    lv_damage = EventUnitDamageAbsorbed();
    lv_shields = UnitGetPropertyFixed(lv_builder, c_unitPropShields, c_unitPropCurrent);
    lv_life = UnitGetPropertyFixed(lv_builder, c_unitPropLife, c_unitPropCurrent);

    // Actions
    if (!runActions) {
        return true;
    }

    if (((lv_life + lv_shields) > lv_damage)) {
        UnitSetPropertyFixed(lv_builder, c_unitPropShields, (lv_shields - lv_damage));
        UnitSetPropertyFixed(lv_builder, c_unitPropLife, (lv_life + MinF(0.0, (lv_shields - lv_damage))));
    }
    else {
        UnitSetPropertyFixed(lv_builder, c_unitPropLife, (lv_life - lv_damage));
    }
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridTeleportTransferDamage_Init () {
    libNHBR_gt_HybridTeleportTransferDamage = TriggerCreate("libNHBR_gt_HybridTeleportTransferDamage_Func");
    TriggerAddEventUnitDamageAbsorbed(libNHBR_gt_HybridTeleportTransferDamage, null, "NHbrIonicCrystalTeleport@Invulnerability");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Time Scale Buff - Initialization
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridTimeScaleBuffInitialization_Func (bool testConds, bool runActions) {
    // Variable Declarations
    int lv_itBuff;
    string lv_buffID;

    // Automatic Variable Declarations
    const int auto49935673_ae = libNHBR_gv_hybridTimeScaleBuffMaxScale_C;
    const int auto49935673_ai = 1;

    // Variable Initialization
    lv_buffID = "";

    // Actions
    if (!runActions) {
        return true;
    }

    lv_itBuff = 1;
    for ( ; ( (auto49935673_ai >= 0 && lv_itBuff <= auto49935673_ae) || (auto49935673_ai < 0 && lv_itBuff >= auto49935673_ae) ) ; lv_itBuff += auto49935673_ai ) {
        if ((lv_itBuff > 0) && (lv_itBuff < 10)) {
            lv_buffID = ("NHbrTimeScaleBuff@00" + IntToString(lv_itBuff));
        }
        else if ((lv_itBuff >= 10) && (lv_itBuff < 100)) {
            lv_buffID = ("NHbrTimeScaleBuff@0" + IntToString(lv_itBuff));
        }
        else if ((lv_itBuff == 100)) {
            lv_buffID = ("NHbrTimeScaleBuff@" + IntToString(lv_itBuff));
        }
        libNHBR_gv_hybridTimeScaleBuff[lv_itBuff] = (lv_buffID);
    }
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridTimeScaleBuffInitialization_Init () {
    libNHBR_gt_HybridTimeScaleBuffInitialization = TriggerCreate("libNHBR_gt_HybridTimeScaleBuffInitialization_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Time Scale Buff - Common - Construction Started
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridTimeScaleBuffCommonConstructionStarted_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_targetStructure;
    unit lv_builder;
    fixed lv_energyUsage;
    fixed lv_drainedEnergyValue;
    bool lv_builderIsStructure;
    fixed lv_progress;
    fixed lv_totalBuildTime;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_targetStructure = EventUnitProgressUnit();
    lv_builder = EventUnit();

    // Conditions
    if (testConds) {
        if (!((libNHBR_gf_RunValidatorOnUnit("RequiresNHbr", lv_targetStructure, lv_targetStructure) == true))) {
            return false;
        }

        if (!((UnitGetPropertyFixed(lv_builder, c_unitPropEnergy, c_unitPropCurrent) > 0.0))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    if ((UnitGetType(lv_builder) != "NHbrMinion")) {
        return true;
        lv_builderIsStructure = true;
    }
    else {
        lv_totalBuildTime = libNHBR_gf_HybridTimeScaleBuffUnitConstructionTime(lv_targetStructure, "NHbrMinionBuild");
    }
    libNHBR_gf_HybridTimeScaleBuffRemoveTimeScaleBuffFromUnit(lv_targetStructure);
    UnitSetCustomValue(lv_builder, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage), 0.0);
    UnitSetCustomValue(lv_builder, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleDrainingEnergy), 0.0);
    UnitBehaviorAdd(lv_builder, "NHbrTimeScaleBuff@EnergyRegenSupressed", lv_builder, 1);
    lv_energyUsage = libNHBR_gf_HybridTimeScaleBuffCalculateEnergyUsageForUnit(lv_builder);
    lv_totalBuildTime *= (1/(libNHBR_gf_HybridTimeScaleBuffBoosterPercentBuff(lv_builder, lv_energyUsage)+1));
    lv_drainedEnergyValue = ((lv_energyUsage/lv_totalBuildTime)/16);
    UnitSetCustomValue(lv_builder, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleDrainingEnergy), lv_drainedEnergyValue);
    UnitCreateEffectUnit(lv_targetStructure, "NHbrCommon@StoreBuilder", lv_builder);
    libNHBR_gf_HybridTimeScaleBuffAddTimeScaleBuffToUnitFromUnit(lv_builder, lv_energyUsage, lv_targetStructure);
    while (true) {
        if ((lv_builderIsStructure == true)) {
            lv_progress = UnitOrderGetProgress(lv_builder);
        }
        else {
            lv_progress = UnitGetProgressComplete(lv_builder, 1);
        }
        if (((UnitGetPropertyFixed(lv_builder, c_unitPropEnergy, c_unitPropCurrent) == 0.0) || (lv_progress >= 100.0))) {
            break;
        }

        UnitCreateEffectUnit(lv_builder, "NHbrTimeScaleBuff@DrainingEnergy", lv_builder);
        UnitSetCustomValue(lv_targetStructure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage), (UnitGetCustomValue(lv_targetStructure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage)) + lv_drainedEnergyValue));
        Wait(0.0625, c_timeGame);
    }
    UnitBehaviorRemove(lv_builder, "NHbrTimeScaleBuff@EnergyRegenSupressed", 1);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridTimeScaleBuffCommonConstructionStarted_Init () {
    libNHBR_gt_HybridTimeScaleBuffCommonConstructionStarted = TriggerCreate("libNHBR_gt_HybridTimeScaleBuffCommonConstructionStarted_Func");
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffCommonConstructionStarted, false);
    TriggerAddEventUnitConstructProgress(libNHBR_gt_HybridTimeScaleBuffCommonConstructionStarted, null, c_unitProgressStageStart);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Time Scale Buff - Common - Construction Completed
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridTimeScaleBuffCommonConstructionCompleted_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_targetStructure;
    point lv_point;
    unit lv_builder;

    // Automatic Variable Declarations
    unitgroup auto44F2E05C_g;
    int auto44F2E05C_u;
    unit auto44F2E05C_var;
    unitgroup auto3A4CC96C_g;
    int auto3A4CC96C_u;
    unit auto3A4CC96C_var;

    // Variable Initialization
    lv_targetStructure = EventUnitProgressUnit();
    lv_point = UnitGetPosition(EventUnitProgressUnit());
    lv_builder = EventUnit();

    // Conditions
    if (testConds) {
        if (!((libNHBR_gf_RunValidatorOnUnit("RequiresNHbr", lv_targetStructure, lv_targetStructure) == true))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    libNHBR_gf_HybridTimeScaleBuffRemoveTimeScaleBuffFromUnit(lv_targetStructure);
    UnitBehaviorRemove(lv_targetStructure, "NHbrCommon@BuildersTracker", 1);
    UnitSetCustomValue(lv_targetStructure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage), 0.0);
    UnitSetCustomValue(lv_targetStructure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleDrainingEnergy), 0.0);
    if ((UnitGetType(lv_builder) == "NHbrMinion")) {
        if ((UnitGroupCount(UnitGroupSearch("NHbrConstruct@AntiAir", UnitGetOwner(lv_builder), lv_point, 1.0, UnitFilter(0, 0, (1 << c_targetFilterMissile), (1 << (c_targetFilterDead - 32)) | (1 << (c_targetFilterHidden - 32))), 0), c_unitCountAlive) > 0)) {
            auto44F2E05C_g = UnitGroupSearch("NHbrConstruct@AntiAir", UnitGetOwner(lv_builder), lv_point, 1.0, UnitFilter(0, 0, (1 << c_targetFilterMissile), (1 << (c_targetFilterDead - 32)) | (1 << (c_targetFilterHidden - 32))), 0);
            auto44F2E05C_u = UnitGroupCount(auto44F2E05C_g, c_unitCountAll);
            for (;; auto44F2E05C_u -= 1) {
                auto44F2E05C_var = UnitGroupUnitFromEnd(auto44F2E05C_g, auto44F2E05C_u);
                if (auto44F2E05C_var == null) { break; }
                libNtve_gf_SendActorMessageToUnit(auto44F2E05C_var, "Create NHbrMinionBuild@BuildOneShot");
                libNtve_gf_SendActorMessageToUnit(auto44F2E05C_var, "Create NHbrMinionBuild@BuildOneShotLow");
                libNtve_gf_SendActorMessageToUnit(auto44F2E05C_var, "Create NHbrMinionBuild@SoundEnd");
            }
        }
        else if ((UnitGroupCount(UnitGroupSearch("NHbrConstruct@AntiGround", UnitGetOwner(lv_targetStructure), UnitGetPosition(lv_targetStructure), 1.0, UnitFilter(0, 0, (1 << c_targetFilterMissile), (1 << (c_targetFilterDead - 32)) | (1 << (c_targetFilterHidden - 32))), 0), c_unitCountAlive) > 0)) {
            auto3A4CC96C_g = UnitGroupSearch("NHbrConstruct@AntiGround", UnitGetOwner(lv_builder), lv_point, 1.0, UnitFilter(0, 0, (1 << c_targetFilterMissile), (1 << (c_targetFilterDead - 32)) | (1 << (c_targetFilterHidden - 32))), 0);
            auto3A4CC96C_u = UnitGroupCount(auto3A4CC96C_g, c_unitCountAll);
            for (;; auto3A4CC96C_u -= 1) {
                auto3A4CC96C_var = UnitGroupUnitFromEnd(auto3A4CC96C_g, auto3A4CC96C_u);
                if (auto3A4CC96C_var == null) { break; }
                libNtve_gf_SendActorMessageToUnit(auto3A4CC96C_var, "Create NHbrMinionBuild@BuildOneShot");
                libNtve_gf_SendActorMessageToUnit(auto3A4CC96C_var, "Create NHbrMinionBuild@BuildOneShotLow");
                libNtve_gf_SendActorMessageToUnit(auto3A4CC96C_var, "Create NHbrMinionBuild@SoundEnd");
            }
        }
    }

    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridTimeScaleBuffCommonConstructionCompleted_Init () {
    libNHBR_gt_HybridTimeScaleBuffCommonConstructionCompleted = TriggerCreate("libNHBR_gt_HybridTimeScaleBuffCommonConstructionCompleted_Func");
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffCommonConstructionCompleted, false);
    TriggerAddEventUnitConstructProgress(libNHBR_gt_HybridTimeScaleBuffCommonConstructionCompleted, null, c_unitProgressStageComplete);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Time Scale Buff - Common - Construction Canceled
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridTimeScaleBuffCommonConstructionCanceled_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_targetStructure;
    unit lv_itBuilder;

    // Automatic Variable Declarations
    unitgroup auto1FADCE83_g;
    int auto1FADCE83_u;

    // Variable Initialization
    lv_targetStructure = EventUnitProgressUnit();

    // Conditions
    if (testConds) {
        if (!((libNHBR_gf_RunValidatorOnUnit("RequiresNHbr", lv_targetStructure, lv_targetStructure) == true))) {
            return false;
        }

        if (!((UnitGetType(EventUnit()) == "NHbrMinion"))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    auto1FADCE83_g = UnitGetTrackedUnitGroup(lv_targetStructure, "NHbrCommon@BuildersTracker");
    auto1FADCE83_u = UnitGroupCount(auto1FADCE83_g, c_unitCountAll);
    for (;; auto1FADCE83_u -= 1) {
        lv_itBuilder = UnitGroupUnitFromEnd(auto1FADCE83_g, auto1FADCE83_u);
        if (lv_itBuilder == null) { break; }
        UnitSetPropertyFixed(lv_itBuilder, c_unitPropEnergy, (UnitGetPropertyFixed(lv_itBuilder, c_unitPropEnergy, c_unitPropCurrent) + UnitGetCustomValue(lv_targetStructure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage))));
    }
    UnitBehaviorRemove(lv_targetStructure, "NHbrTimeScaleBuff@EnergyRegenSupressed", 1);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridTimeScaleBuffCommonConstructionCanceled_Init () {
    libNHBR_gt_HybridTimeScaleBuffCommonConstructionCanceled = TriggerCreate("libNHBR_gt_HybridTimeScaleBuffCommonConstructionCanceled_Func");
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffCommonConstructionCanceled, false);
    TriggerAddEventUnitConstructProgress(libNHBR_gt_HybridTimeScaleBuffCommonConstructionCanceled, null, c_unitProgressStageCancel);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Time Scale Buff - Minion - Construction Resumed
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridTimeScaleBuffMinionConstructionResumed_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_targetStructure;
    unit lv_minion;
    fixed lv_energyUsage;
    fixed lv_energyCurrent;
    fixed lv_drainedEnergyValue;
    fixed lv_newEnergyValue;
    fixed lv_totalBuildTime;
    unit lv_itBuilder;

    // Automatic Variable Declarations
    unitgroup auto2E38755A_g;
    int auto2E38755A_u;

    // Variable Initialization
    lv_targetStructure = EventUnitProgressUnit();
    lv_minion = EventUnit();

    // Conditions
    if (testConds) {
        if (!((UnitGetType(lv_minion) == "NHbrMinion"))) {
            return false;
        }

        if (!((UnitGetPropertyFixed(lv_minion, c_unitPropEnergy, c_unitPropCurrent) > 0.0))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    libNHBR_gf_HybridTimeScaleBuffRemoveTimeScaleBuffFromUnit(lv_targetStructure);
    UnitSetCustomValue(lv_minion, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage), 0.0);
    UnitSetCustomValue(lv_minion, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleDrainingEnergy), 0.0);
    UnitBehaviorAdd(lv_minion, "NHbrTimeScaleBuff@EnergyRegenSupressed", lv_minion, 1);
    auto2E38755A_g = UnitGetTrackedUnitGroup(lv_targetStructure, "NHbrCommon@BuildersTracker");
    auto2E38755A_u = UnitGroupCount(auto2E38755A_g, c_unitCountAll);
    for (;; auto2E38755A_u -= 1) {
        lv_itBuilder = UnitGroupUnitFromEnd(auto2E38755A_g, auto2E38755A_u);
        if (lv_itBuilder == null) { break; }
        if ((lv_itBuilder != lv_minion)) {
            if ((UnitGetCustomValue(lv_targetStructure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage)) > UnitGetPropertyFixed(lv_minion, c_unitPropEnergy, c_unitPropCurrent))) {
                UnitSetPropertyFixed(lv_itBuilder, c_unitPropEnergy, (UnitGetPropertyFixed(lv_itBuilder, c_unitPropEnergy, c_unitPropCurrent) + UnitGetPropertyFixed(lv_minion, c_unitPropEnergy, c_unitPropCurrent)));
            }
            else {
                UnitSetPropertyFixed(lv_itBuilder, c_unitPropEnergy, (UnitGetPropertyFixed(lv_itBuilder, c_unitPropEnergy, c_unitPropCurrent) + UnitGetCustomValue(lv_targetStructure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage))));
            }
        }

        UnitCreateEffectUnit(lv_targetStructure, "NHbrCommon@ClearBuilder", lv_minion);
        UnitSetCustomValue(lv_targetStructure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage), 0.0);
    }
    lv_totalBuildTime = libNHBR_gf_HybridTimeScaleBuffUnitConstructionTime(lv_targetStructure, "NHbrMinionBuild");
    lv_totalBuildTime -= (lv_totalBuildTime*(UnitGetProgressComplete(lv_targetStructure, 1)/100));
    lv_energyUsage = libNHBR_gf_HybridTimeScaleBuffCalculateEnergyUsageForUnit(lv_minion);
    lv_totalBuildTime *= (1/(libNHBR_gf_HybridTimeScaleBuffBoosterPercentBuff(lv_minion, lv_energyUsage)+1));
    lv_drainedEnergyValue = ((lv_energyUsage/lv_totalBuildTime)/16);
    UnitSetCustomValue(lv_minion, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleDrainingEnergy), lv_drainedEnergyValue);
    UnitCreateEffectUnit(lv_targetStructure, "NHbrCommon@StoreBuilder", lv_minion);
    libNHBR_gf_HybridTimeScaleBuffAddTimeScaleBuffToUnitFromUnit(lv_minion, lv_energyUsage, lv_targetStructure);
    while ((UnitGetProgressComplete(lv_minion, 1) < 100.0) && (UnitGetPropertyFixed(lv_minion, c_unitPropEnergy, c_unitPropCurrent) > 0.0)) {
        UnitCreateEffectUnit(lv_minion, "NHbrTimeScaleBuff@DrainingEnergy", lv_minion);
        UnitSetCustomValue(lv_targetStructure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage), (UnitGetCustomValue(lv_targetStructure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage)) + lv_drainedEnergyValue));
        Wait(0.0625, c_timeGame);
    }
    UnitBehaviorRemove(lv_minion, "NHbrTimeScaleBuff@EnergyRegenSupressed", 1);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridTimeScaleBuffMinionConstructionResumed_Init () {
    libNHBR_gt_HybridTimeScaleBuffMinionConstructionResumed = TriggerCreate("libNHBR_gt_HybridTimeScaleBuffMinionConstructionResumed_Func");
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffMinionConstructionResumed, false);
    TriggerAddEventUnitConstructProgress(libNHBR_gt_HybridTimeScaleBuffMinionConstructionResumed, null, c_unitProgressStageResume);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Time Scale Buff - Minion - Construction Paused
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridTimeScaleBuffMinionConstructionPaused_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_targetStructure;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_targetStructure = EventUnitProgressUnit();

    // Conditions
    if (testConds) {
        if (!((libNtve_gf_UnitIsUnderConstruction(lv_targetStructure) == true))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    libNHBR_gf_HybridTimeScaleBuffRemoveTimeScaleBuffFromUnit(lv_targetStructure);
    UnitBehaviorRemove(EventUnit(), "NHbrTimeScaleBuff@EnergyRegenSupressed", 1);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridTimeScaleBuffMinionConstructionPaused_Init () {
    libNHBR_gt_HybridTimeScaleBuffMinionConstructionPaused = TriggerCreate("libNHBR_gt_HybridTimeScaleBuffMinionConstructionPaused_Func");
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffMinionConstructionPaused, false);
    TriggerAddEventUnitConstructProgress(libNHBR_gt_HybridTimeScaleBuffMinionConstructionPaused, null, c_unitProgressStagePause);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Time Scale Buff - Structure - Training Started
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridTimeScaleBuffStructureTrainingStarted_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_structure;
    fixed lv_energyUsage;
    fixed lv_energyCurrent;
    fixed lv_drainedEnergyValue;
    fixed lv_queueTime;
    int lv_repeatTime;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_structure = EventUnit();

    // Conditions
    if (testConds) {
        if (!((libNHBR_gf_RunValidatorOnUnit("RequiresNHbr", lv_structure, lv_structure) == true))) {
            return false;
        }

        if (!((UnitGetPropertyFixed(lv_structure, c_unitPropEnergy, c_unitPropCurrent) > 0.0))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    libNHBR_gf_HybridTimeScaleBuffRemoveTimeScaleBuffFromUnit(lv_structure);
    UnitSetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage), 0.0);
    UnitSetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleDrainingEnergy), 0.0);
    UnitBehaviorAdd(lv_structure, "NHbrTimeScaleBuff@EnergyRegenSupressed", lv_structure, 1);
    lv_queueTime = UnitQueueItemTime(lv_structure, c_unitQueueTimeTotal, 1);
    lv_energyUsage = libNHBR_gf_HybridTimeScaleBuffCalculateEnergyUsageForUnit(lv_structure);
    lv_queueTime *= (1/(libNHBR_gf_HybridTimeScaleBuffBoosterPercentBuff(lv_structure, lv_energyUsage)+1));
    lv_drainedEnergyValue = ((lv_energyUsage/lv_queueTime)/16);
    UnitSetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleDrainingEnergy), lv_drainedEnergyValue);
    libNHBR_gf_HybridTimeScaleBuffAddTimeScaleBuffToUnitFromUnit(lv_structure, lv_energyUsage, lv_structure);
    while (true) {
        if (((UnitQueueItemTime(lv_structure, c_unitQueueTimeRemaining, 1) == 0.0))) {
            break;
        }

        UnitCreateEffectUnit(lv_structure, "NHbrTimeScaleBuff@DrainingEnergy", lv_structure);
        UnitSetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage), (UnitGetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage)) + lv_drainedEnergyValue));
        Wait(0.0625, c_timeGame);
    }
    UnitBehaviorRemove(lv_structure, "NHbrTimeScaleBuff@EnergyRegenSupressed", 1);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridTimeScaleBuffStructureTrainingStarted_Init () {
    libNHBR_gt_HybridTimeScaleBuffStructureTrainingStarted = TriggerCreate("libNHBR_gt_HybridTimeScaleBuffStructureTrainingStarted_Func");
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffStructureTrainingStarted, false);
    TriggerAddEventUnitTrainProgress(libNHBR_gt_HybridTimeScaleBuffStructureTrainingStarted, null, c_unitProgressStageStart);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Time Scale Buff - Structure - Training Completed
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridTimeScaleBuffStructureTrainingCompleted_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_structure;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_structure = EventUnit();

    // Conditions
    if (testConds) {
        if (!((libNHBR_gf_RunValidatorOnUnit("RequiresNHbr", lv_structure, lv_structure) == true))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    libNHBR_gf_HybridTimeScaleBuffRemoveTimeScaleBuffFromUnit(lv_structure);
    UnitSetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage), 0.0);
    UnitSetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleDrainingEnergy), 0.0);
    UnitBehaviorRemove(lv_structure, "NHbrTimeScaleBuff@EnergyRegenSupressed", 1);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridTimeScaleBuffStructureTrainingCompleted_Init () {
    libNHBR_gt_HybridTimeScaleBuffStructureTrainingCompleted = TriggerCreate("libNHBR_gt_HybridTimeScaleBuffStructureTrainingCompleted_Func");
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffStructureTrainingCompleted, false);
    TriggerAddEventUnitTrainProgress(libNHBR_gt_HybridTimeScaleBuffStructureTrainingCompleted, null, c_unitProgressStageComplete);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Time Scale Buff - Structure - Training Cancelled
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridTimeScaleBuffStructureTrainingCancelled_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_structure;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_structure = EventUnit();

    // Conditions
    if (testConds) {
        if (!((libNHBR_gf_RunValidatorOnUnit("RequiresNHbr", lv_structure, lv_structure) == true))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    libNHBR_gf_HybridTimeScaleBuffRemoveTimeScaleBuffFromUnit(lv_structure);
    UnitSetPropertyFixed(lv_structure, c_unitPropEnergy, (UnitGetPropertyFixed(lv_structure, c_unitPropEnergy, c_unitPropCurrent) + UnitGetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage))));
    UnitSetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage), 0.0);
    UnitSetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleDrainingEnergy), 0.0);
    UnitBehaviorRemove(lv_structure, "NHbrTimeScaleBuff@EnergyRegenSupressed", 1);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridTimeScaleBuffStructureTrainingCancelled_Init () {
    libNHBR_gt_HybridTimeScaleBuffStructureTrainingCancelled = TriggerCreate("libNHBR_gt_HybridTimeScaleBuffStructureTrainingCancelled_Func");
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffStructureTrainingCancelled, false);
    TriggerAddEventUnitTrainProgress(libNHBR_gt_HybridTimeScaleBuffStructureTrainingCancelled, null, c_unitProgressStageCancel);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Time Scale Buff - Structure - Research Started
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridTimeScaleBuffStructureResearchStarted_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_structure;
    fixed lv_energyUsage;
    fixed lv_drainedEnergyValue;
    bool lv_builderIsStructure;
    fixed lv_progress;
    fixed lv_totalResearchTime;
    int lv_repeatTime;

    // Automatic Variable Declarations
    string autoB945DF01_val;
    int autoA870D26E_n;
    int autoA870D26E_i;

    // Variable Initialization
    lv_structure = EventUnit();

    // Conditions
    if (testConds) {
        if (!((libNHBR_gf_RunValidatorOnUnit("RequiresNHbr", lv_structure, lv_structure) == true))) {
            return false;
        }

        if (!((UnitGetPropertyFixed(lv_structure, c_unitPropEnergy, c_unitPropCurrent) > 0.0))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    libNHBR_gf_HybridTimeScaleBuffRemoveTimeScaleBuffFromUnit(lv_structure);
    UnitSetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage), 0.0);
    UnitSetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleDrainingEnergy), 0.0);
    UnitBehaviorAdd(lv_structure, "NHbrTimeScaleBuff@EnergyRegenSupressed", lv_structure, 1);
    autoB945DF01_val = UnitGetType(lv_structure);
    if (autoB945DF01_val == "NHbrVespeneConcentrator") {
        lv_totalResearchTime = libNHBR_gf_HybridTimeScaleBuffUpgradeResearchTime(libNtve_gf_TriggeringProgressUpgrade(), "NHbrVespeneConcentratorResearch");
    }
    else if (autoB945DF01_val == "NHbrStasisCell") {
        lv_totalResearchTime = libNHBR_gf_HybridTimeScaleBuffUpgradeResearchTime(libNtve_gf_TriggeringProgressUpgrade(), "NHbrStasisCellResearch");
    }
    else if (autoB945DF01_val == "NHbrCrystallicShrine") {
        lv_totalResearchTime = libNHBR_gf_HybridTimeScaleBuffUpgradeResearchTime(libNtve_gf_TriggeringProgressUpgrade(), "NHbrCrystallicShrineResearch");
    }
    else if (autoB945DF01_val == "NHbrProcessingCore") {
        lv_totalResearchTime = libNHBR_gf_HybridTimeScaleBuffUpgradeResearchTime(libNtve_gf_TriggeringProgressUpgrade(), "NHbrProcessingCoreResearch");
    }
    else if (autoB945DF01_val == "NHbrEngine") {
        lv_totalResearchTime = libNHBR_gf_HybridTimeScaleBuffUpgradeResearchTime(libNtve_gf_TriggeringProgressUpgrade(), "NHbrEngineResearch");
    }
    else if (autoB945DF01_val == "NHbrProcessor") {
        lv_totalResearchTime = libNHBR_gf_HybridTimeScaleBuffUpgradeResearchTime(libNtve_gf_TriggeringProgressUpgrade(), "NHbrWorkshopResearch");
    }
    else if (autoB945DF01_val == "NHbrVoidPortal") {
        lv_totalResearchTime = libNHBR_gf_HybridTimeScaleBuffUpgradeResearchTime(libNtve_gf_TriggeringProgressUpgrade(), "NHbrVoidPortalResearch");
    }
    else if (autoB945DF01_val == "NHbrNemesisCatacomb") {
        lv_totalResearchTime = libNHBR_gf_HybridTimeScaleBuffUpgradeResearchTime(libNtve_gf_TriggeringProgressUpgrade(), "NHbrNemesisCatacombResearch@Research");
    }
    else {
    }
    Wait(0.0625, c_timeGame);
    lv_energyUsage = libNHBR_gf_HybridTimeScaleBuffCalculateEnergyUsageForUnit(lv_structure);
    lv_totalResearchTime *= (1/(libNHBR_gf_HybridTimeScaleBuffBoosterPercentBuff(lv_structure, lv_energyUsage)+1));
    lv_drainedEnergyValue = ((lv_energyUsage/lv_totalResearchTime)/16);
    UnitSetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleDrainingEnergy), lv_drainedEnergyValue);
    libNHBR_gf_HybridTimeScaleBuffAddTimeScaleBuffToUnitFromUnit(lv_structure, lv_energyUsage, lv_structure);
    lv_repeatTime = FixedToInt(Round((lv_totalResearchTime / 0.0625)));
    autoA870D26E_n = lv_repeatTime;
    for (autoA870D26E_i = 1; autoA870D26E_i <= autoA870D26E_n; autoA870D26E_i += 1) {
        lv_progress = UnitGetProgressComplete(lv_structure, 1);
        if (((lv_progress >= 100.0))) {
            break;
        }

        UnitCreateEffectUnit(lv_structure, "NHbrTimeScaleBuff@DrainingEnergy", lv_structure);
        UnitSetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage), (UnitGetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage)) + lv_drainedEnergyValue));
        Wait(0.0625, c_timeGame);
    }
    UnitBehaviorRemove(lv_structure, "NHbrTimeScaleBuff@EnergyRegenSupressed", 1);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridTimeScaleBuffStructureResearchStarted_Init () {
    libNHBR_gt_HybridTimeScaleBuffStructureResearchStarted = TriggerCreate("libNHBR_gt_HybridTimeScaleBuffStructureResearchStarted_Func");
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffStructureResearchStarted, false);
    TriggerAddEventUnitResearchProgress(libNHBR_gt_HybridTimeScaleBuffStructureResearchStarted, null, c_unitProgressStageStart);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Time Scale Buff - Structure - Research Completed
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridTimeScaleBuffStructureResearchCompleted_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_structure;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_structure = EventUnit();

    // Conditions
    if (testConds) {
        if (!((libNHBR_gf_RunValidatorOnUnit("RequiresNHbr", lv_structure, lv_structure) == true))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    libNHBR_gf_HybridTimeScaleBuffRemoveTimeScaleBuffFromUnit(lv_structure);
    UnitSetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage), 0.0);
    UnitSetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleDrainingEnergy), 0.0);
    UnitBehaviorRemove(lv_structure, "NHbrTimeScaleBuff@EnergyRegenSupressed", 1);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridTimeScaleBuffStructureResearchCompleted_Init () {
    libNHBR_gt_HybridTimeScaleBuffStructureResearchCompleted = TriggerCreate("libNHBR_gt_HybridTimeScaleBuffStructureResearchCompleted_Func");
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffStructureResearchCompleted, false);
    TriggerAddEventUnitResearchProgress(libNHBR_gt_HybridTimeScaleBuffStructureResearchCompleted, null, c_unitProgressStageComplete);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Time Scale Buff - Structure - Research Cancelled
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridTimeScaleBuffStructureResearchCancelled_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_structure;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_structure = EventUnit();

    // Conditions
    if (testConds) {
        if (!((libNHBR_gf_RunValidatorOnUnit("RequiresNHbr", lv_structure, lv_structure) == true))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    libNHBR_gf_HybridTimeScaleBuffRemoveTimeScaleBuffFromUnit(lv_structure);
    UnitSetPropertyFixed(lv_structure, c_unitPropEnergy, (UnitGetPropertyFixed(lv_structure, c_unitPropEnergy, c_unitPropCurrent) + UnitGetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage))));
    UnitSetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleEnergyUsage), 0.0);
    UnitSetCustomValue(lv_structure, libNHBR_gf_CustomValueIndex(libNHBR_ge_CustomValueIndexes_TimeScaleDrainingEnergy), 0.0);
    UnitBehaviorRemove(lv_structure, "NHbrTimeScaleBuff@EnergyRegenSupressed", 1);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridTimeScaleBuffStructureResearchCancelled_Init () {
    libNHBR_gt_HybridTimeScaleBuffStructureResearchCancelled = TriggerCreate("libNHBR_gt_HybridTimeScaleBuffStructureResearchCancelled_Func");
    TriggerEnable(libNHBR_gt_HybridTimeScaleBuffStructureResearchCancelled, false);
    TriggerAddEventUnitResearchProgress(libNHBR_gt_HybridTimeScaleBuffStructureResearchCancelled, null, c_unitProgressStageCancel);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Dominator - Upgrade To Advanced Dominator
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridDominatorUpgradeToAdvancedDominator_Func (bool testConds, bool runActions) {
    // Variable Declarations
    string lv_dominator;
    string lv_advancedDominator;
    int lv_player;
    int lv_remainingShields;

    // Automatic Variable Declarations
    // Variable Initialization

    // Conditions
    if (testConds) {
        if (!((EventUpgradeName() == "NHbrDominatorUpgradeToAdvancedDominator"))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    lv_player = EventPlayer();
    lv_dominator = "NHbrDominator";
    lv_advancedDominator = "NHbrDominatorAdvanced";
    CatalogFieldValueSet(c_gameCatalogUnit, lv_dominator, "LifeMax", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedDominator, "LifeMax", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_dominator, "LifeStart", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedDominator, "LifeStart", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_dominator, "ShieldsMax", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedDominator, "ShieldsMax", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_dominator, "ShieldsStart", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedDominator, "ShieldsStart", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_dominator, "EnergyMax", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedDominator, "EnergyMax", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_dominator, "EnergyStart", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedDominator, "EnergyStart", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_dominator, "Name", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedDominator, "Name", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_dominator, "Description", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedDominator, "Description", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_dominator, "CostResource[" + IntToString(0) + "]", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedDominator, "CostResource[" + IntToString(0) + "]", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_dominator, "CostResource[" + IntToString(1) + "]", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedDominator, "CostResource[" + IntToString(1) + "]", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_dominator, "CostResource[" + IntToString(2) + "]", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedDominator, "CostResource[" + IntToString(2) + "]", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_dominator, "CostResource[" + IntToString(3) + "]", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedDominator, "CostResource[" + IntToString(3) + "]", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_dominator, "Speed", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedDominator, "Speed", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogActor, lv_dominator, "HighlightTooltip", lv_player, CatalogFieldValueGet(c_gameCatalogActor, lv_advancedDominator, "HighlightTooltip", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogActor, lv_dominator, "CustomUnitStatusFrame", lv_player, CatalogFieldValueGet(c_gameCatalogActor, lv_advancedDominator, "CustomUnitStatusFrame", c_playerAny));
    libNHBR_gf_UpgradeButtontoButtonForPlayer("NHbrVoidRiftTrain@WarpInDominator", "NHbrVoidRiftTrain@WarpInAdvancedDominator", lv_player);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridDominatorUpgradeToAdvancedDominator_Init () {
    libNHBR_gt_HybridDominatorUpgradeToAdvancedDominator = TriggerCreate("libNHBR_gt_HybridDominatorUpgradeToAdvancedDominator_Func");
    TriggerEnable(libNHBR_gt_HybridDominatorUpgradeToAdvancedDominator, false);
    TriggerAddEventUpgradeLevelChanged(libNHBR_gt_HybridDominatorUpgradeToAdvancedDominator, c_playerAny);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Reaver - Upgrade To Advanced Reaver
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridReaverUpgradeToAdvancedReaver_Func (bool testConds, bool runActions) {
    // Variable Declarations
    string lv_reaver;
    string lv_advancedReaver;
    int lv_player;
    int lv_remainingShields;

    // Automatic Variable Declarations
    // Variable Initialization

    // Conditions
    if (testConds) {
        if (!((EventUpgradeName() == "NHbrReaverUpgradeToAdvancedReaver"))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    lv_player = EventPlayer();
    lv_reaver = "NHbrReaver";
    lv_advancedReaver = "NHbrReaverAdvanced";
    CatalogFieldValueSet(c_gameCatalogUnit, lv_reaver, "LifeMax", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedReaver, "LifeMax", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_reaver, "LifeStart", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedReaver, "LifeStart", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_reaver, "ShieldsMax", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedReaver, "ShieldsMax", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_reaver, "ShieldsStart", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedReaver, "ShieldsStart", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_reaver, "EnergyMax", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedReaver, "EnergyMax", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_reaver, "EnergyStart", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedReaver, "EnergyStart", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_reaver, "Name", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedReaver, "Name", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_reaver, "Description", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedReaver, "Description", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_reaver, "CostResource[" + IntToString(0) + "]", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedReaver, "CostResource[" + IntToString(0) + "]", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_reaver, "CostResource[" + IntToString(1) + "]", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedReaver, "CostResource[" + IntToString(1) + "]", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_reaver, "CostResource[" + IntToString(2) + "]", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedReaver, "CostResource[" + IntToString(2) + "]", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_reaver, "CostResource[" + IntToString(3) + "]", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedReaver, "CostResource[" + IntToString(3) + "]", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_reaver, "Speed", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedReaver, "Speed", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogActor, lv_reaver, "HighlightTooltip", lv_player, CatalogFieldValueGet(c_gameCatalogActor, lv_advancedReaver, "HighlightTooltip", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogActor, lv_reaver, "CustomUnitStatusFrame", lv_player, CatalogFieldValueGet(c_gameCatalogActor, lv_advancedReaver, "CustomUnitStatusFrame", c_playerAny));
    libNHBR_gf_UpgradeButtontoButtonForPlayer("NHbrVoidRiftTrain@WarpInReaver", "NHbrVoidRiftTrain@WarpInAdvancedReaver", lv_player);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridReaverUpgradeToAdvancedReaver_Init () {
    libNHBR_gt_HybridReaverUpgradeToAdvancedReaver = TriggerCreate("libNHBR_gt_HybridReaverUpgradeToAdvancedReaver_Func");
    TriggerEnable(libNHBR_gt_HybridReaverUpgradeToAdvancedReaver, false);
    TriggerAddEventUpgradeLevelChanged(libNHBR_gt_HybridReaverUpgradeToAdvancedReaver, c_playerAny);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Nemesis - Upgrade To Advanced Nemesis
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridNemesisUpgradeToAdvancedNemesis_Func (bool testConds, bool runActions) {
    // Variable Declarations
    string lv_nemesis;
    string lv_advancedNemesis;
    int lv_player;
    int lv_remainingShields;

    // Automatic Variable Declarations
    // Variable Initialization

    // Conditions
    if (testConds) {
        if (!((EventUpgradeName() == "NHbrNemesisUpgradeToAdvancedNemesis"))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    lv_player = EventPlayer();
    lv_nemesis = "NHbrNemesis";
    lv_advancedNemesis = "NHbrNemesisAdvanced";
    CatalogFieldValueSet(c_gameCatalogUnit, lv_nemesis, "LifeMax", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedNemesis, "LifeMax", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_nemesis, "LifeStart", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedNemesis, "LifeStart", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_nemesis, "ShieldsMax", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedNemesis, "ShieldsMax", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_nemesis, "ShieldsStart", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedNemesis, "ShieldsStart", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_nemesis, "EnergyMax", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedNemesis, "EnergyMax", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_nemesis, "EnergyStart", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedNemesis, "EnergyStart", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_nemesis, "Name", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedNemesis, "Name", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_nemesis, "Description", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedNemesis, "Description", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_nemesis, "CostResource[" + IntToString(0) + "]", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedNemesis, "CostResource[" + IntToString(0) + "]", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_nemesis, "CostResource[" + IntToString(1) + "]", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedNemesis, "CostResource[" + IntToString(1) + "]", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_nemesis, "CostResource[" + IntToString(2) + "]", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedNemesis, "CostResource[" + IntToString(2) + "]", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_nemesis, "CostResource[" + IntToString(3) + "]", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedNemesis, "CostResource[" + IntToString(3) + "]", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogUnit, lv_nemesis, "Speed", lv_player, CatalogFieldValueGet(c_gameCatalogUnit, lv_advancedNemesis, "Speed", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogActor, lv_nemesis, "HighlightTooltip", lv_player, CatalogFieldValueGet(c_gameCatalogActor, lv_advancedNemesis, "HighlightTooltip", c_playerAny));
    CatalogFieldValueSet(c_gameCatalogActor, lv_nemesis, "CustomUnitStatusFrame", lv_player, CatalogFieldValueGet(c_gameCatalogActor, lv_advancedNemesis, "CustomUnitStatusFrame", c_playerAny));
    libNHBR_gf_UpgradeButtontoButtonForPlayer("NHbrVoidRiftTrain@WarpInNemesis", "NHbrVoidRiftTrain@WarpInAdvancedNemesis", lv_player);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridNemesisUpgradeToAdvancedNemesis_Init () {
    libNHBR_gt_HybridNemesisUpgradeToAdvancedNemesis = TriggerCreate("libNHBR_gt_HybridNemesisUpgradeToAdvancedNemesis_Func");
    TriggerEnable(libNHBR_gt_HybridNemesisUpgradeToAdvancedNemesis, false);
    TriggerAddEventUpgradeLevelChanged(libNHBR_gt_HybridNemesisUpgradeToAdvancedNemesis, c_playerAny);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Silent - Weapon Buff
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_SilentWeaponBuff_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_silent;
    fixed lv_weaponCooldown;
    fixed lv_networkAmount;
    fixed lv_networkPercent;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_silent = EventPlayerEffectUsedUnit(c_effectUnitCaster);
    lv_weaponCooldown = UnitWeaponPeriod(lv_silent, 1);
    lv_networkAmount = UnitGetPropertyFixed(lv_silent, c_unitPropEnergy, c_unitPropCurrent);
    lv_networkPercent = (0.01 * UnitGetPropertyFixed(lv_silent, c_unitPropEnergyPercent, c_unitPropCurrent));

    // Actions
    if (!runActions) {
        return true;
    }

    UnitWeaponSetPeriodRemaining(lv_silent, 1, (lv_weaponCooldown/(libNHBR_gv_silentAttacksPerSecond*(1+lv_networkPercent))));
    UnitCreateEffectUnit(lv_silent, "NHbrSilentWeapon@ReduceNetwork", lv_silent);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_SilentWeaponBuff_Init () {
    libNHBR_gt_SilentWeaponBuff = TriggerCreate("libNHBR_gt_SilentWeaponBuff_Func");
    TriggerAddEventPlayerEffectUsed(libNHBR_gt_SilentWeaponBuff, 1, "NHbrSilentWeapon@MUDummy");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Navigator - Cargo UI
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridNavigatorCargoUI_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_navigator;
    int lv_spaceUsed;
    unit lv_itCargoUnit;
    int[5] lv_cargoSizePerUnit;
    int lv_itSegment;
    int lv_unitStatusBar;
    int lv_itCargoSizeType;
    int lv_itCargoSize;
    int lv_lastUsedSegment;
    int lv_oldUsedSegment;
    int lv_size;

    // Automatic Variable Declarations
    const int auto00D40A2C_ae = 7;
    const int auto00D40A2C_ai = 1;
    unitgroup autoCFE5DA21_g;
    int autoCFE5DA21_u;
    int autoA4CE4C6C_val;
    const int autoBDFCD470_ae = 1;
    const int autoBDFCD470_ai = -1;
    int auto263FED96_val;
    int autoB30A1CE2_ae;
    const int autoB30A1CE2_ai = 1;
    int auto86545C68_ae;
    const int auto86545C68_ai = 1;

    // Variable Initialization
    lv_unitStatusBar = c_invalidDialogControlId;
    lv_oldUsedSegment = 1;

    // Conditions
    if (testConds) {
        if (!((UnitGetType(EventUnit()) == "NHbrNavigator"))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    lv_navigator = EventUnit();
    lv_spaceUsed = UnitCargoValue(lv_navigator, c_unitCargoSpaceUsed);
    DialogControlHookupUnitStatus(c_triggerControlTypeProgressBar, "CustomCargoBar", lv_navigator);
    lv_unitStatusBar = DialogControlLastCreated();
    libNtve_gf_SetDialogItemCurrentValue(lv_unitStatusBar, UnitCargoValue(lv_navigator, c_unitCargoSpaceUsed), PlayerGroupAll());
    lv_itSegment = 1;
    for ( ; ( (auto00D40A2C_ai >= 0 && lv_itSegment <= auto00D40A2C_ae) || (auto00D40A2C_ai < 0 && lv_itSegment >= auto00D40A2C_ae) ) ; lv_itSegment += auto00D40A2C_ai ) {
        DialogControlHookupUnitStatus(c_triggerControlTypeImage, ("CustomCargoBar/Segmentator/Segment" + IntToString(lv_itSegment)), lv_navigator);
        DialogControlSetVisible(DialogControlLastCreated(), PlayerGroupAll(), true);
    }
    autoCFE5DA21_g = UnitCargoGroup(lv_navigator);
    autoCFE5DA21_u = UnitGroupCount(autoCFE5DA21_g, c_unitCountAll);
    for (;; autoCFE5DA21_u -= 1) {
        lv_itCargoUnit = UnitGroupUnitFromEnd(autoCFE5DA21_g, autoCFE5DA21_u);
        if (lv_itCargoUnit == null) { break; }
        autoA4CE4C6C_val = CatalogFieldValueGetAsInt(c_gameCatalogUnit, UnitGetType(lv_itCargoUnit), "CargoSize", c_playerAny);
        if (autoA4CE4C6C_val == 1) {
            lv_cargoSizePerUnit[libNHBR_ge_HybridNavigatorCargoUI_Size1] += 1;
        }
        else if (autoA4CE4C6C_val == 2) {
            lv_cargoSizePerUnit[libNHBR_ge_HybridNavigatorCargoUI_Size2] += 1;
        }
        else if (autoA4CE4C6C_val == 4) {
            lv_cargoSizePerUnit[libNHBR_ge_HybridNavigatorCargoUI_Size4] += 1;
        }
        else if (autoA4CE4C6C_val == 8) {
            lv_cargoSizePerUnit[libNHBR_ge_HybridNavigatorCargoUI_Size8] += 1;
        }
        else {
        }
    }
    lv_itCargoSizeType = 4;
    for ( ; ( (autoBDFCD470_ai >= 0 && lv_itCargoSizeType <= autoBDFCD470_ae) || (autoBDFCD470_ai < 0 && lv_itCargoSizeType >= autoBDFCD470_ae) ) ; lv_itCargoSizeType += autoBDFCD470_ai ) {
        if ((lv_cargoSizePerUnit[lv_itCargoSizeType] > 0)) {
            auto263FED96_val = lv_itCargoSizeType;
            if (auto263FED96_val == libNHBR_ge_HybridNavigatorCargoUI_Size1) {
                lv_size = 1;
            }
            else if (auto263FED96_val == libNHBR_ge_HybridNavigatorCargoUI_Size2) {
                lv_size = 2;
            }
            else if (auto263FED96_val == libNHBR_ge_HybridNavigatorCargoUI_Size4) {
                lv_size = 4;
            }
            else if (auto263FED96_val == libNHBR_ge_HybridNavigatorCargoUI_Size8) {
                lv_size = 8;
            }
            else {
            }
            autoB30A1CE2_ae = lv_cargoSizePerUnit[lv_itCargoSizeType];
            lv_itCargoSize = 1;
            for ( ; ( (autoB30A1CE2_ai >= 0 && lv_itCargoSize <= autoB30A1CE2_ae) || (autoB30A1CE2_ai < 0 && lv_itCargoSize >= autoB30A1CE2_ae) ) ; lv_itCargoSize += autoB30A1CE2_ai ) {
                lv_lastUsedSegment = (lv_lastUsedSegment + lv_size);
                if ((lv_size > 1)) {
                    auto86545C68_ae = (lv_lastUsedSegment-1);
                    lv_itSegment = lv_oldUsedSegment;
                    for ( ; ( (auto86545C68_ai >= 0 && lv_itSegment <= auto86545C68_ae) || (auto86545C68_ai < 0 && lv_itSegment >= auto86545C68_ae) ) ; lv_itSegment += auto86545C68_ai ) {
                        DialogControlHookupUnitStatus(c_triggerControlTypeImage, ("CustomCargoBar/Segmentator/Segment" + IntToString(lv_itSegment)), lv_navigator);
                        DialogControlSetVisible(DialogControlLastCreated(), PlayerGroupAll(), false);
                        lv_oldUsedSegment = (lv_lastUsedSegment+1);
                    }
                }

                if ((lv_lastUsedSegment == 8)) {
                    return true;
                }

            }
        }

    }
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridNavigatorCargoUI_Init () {
    libNHBR_gt_HybridNavigatorCargoUI = TriggerCreate("libNHBR_gt_HybridNavigatorCargoUI_Func");
    TriggerAddEventUnitCargo(libNHBR_gt_HybridNavigatorCargoUI, null, true);
    TriggerAddEventUnitCargo(libNHBR_gt_HybridNavigatorCargoUI, null, false);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Reaver - Consume DNA - Autocast On
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridReaverConsumeDNAAutocastOn_Func (bool testConds, bool runActions) {
    // Automatic Variable Declarations
    // Actions
    if (!runActions) {
        return true;
    }

    UnitBehaviorAdd(EventUnit(), "NHbrReaverConsumeDNA@AutocastController", EventUnit(), 1);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridReaverConsumeDNAAutocastOn_Init () {
    libNHBR_gt_HybridReaverConsumeDNAAutocastOn = TriggerCreate("libNHBR_gt_HybridReaverConsumeDNAAutocastOn_Func");
    TriggerAddEventUnitAbilityAutoCastChange(libNHBR_gt_HybridReaverConsumeDNAAutocastOn, null, AbilityCommand("NHbrReaverConsumeDNA", 0), c_unitAbilAutoCastChangeOn, false);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Reaver - Consume DNA - Autocast Off
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridReaverConsumeDNAAutocastOff_Func (bool testConds, bool runActions) {
    // Automatic Variable Declarations
    // Actions
    if (!runActions) {
        return true;
    }

    UnitBehaviorRemove(EventUnit(), "NHbrReaverConsumeDNA@AutocastController", 1);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridReaverConsumeDNAAutocastOff_Init () {
    libNHBR_gt_HybridReaverConsumeDNAAutocastOff = TriggerCreate("libNHBR_gt_HybridReaverConsumeDNAAutocastOff_Func");
    TriggerAddEventUnitAbilityAutoCastChange(libNHBR_gt_HybridReaverConsumeDNAAutocastOff, null, AbilityCommand("NHbrReaverConsumeDNA", 0), c_unitAbilAutoCastChangeOff, false);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hybrid - Void Rift - Cargo UI
//--------------------------------------------------------------------------------------------------
bool libNHBR_gt_HybridVoidRiftCargoUI_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_navigator;
    int lv_spaceUsed;
    int lv_unitStatusBar;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_unitStatusBar = c_invalidDialogControlId;

    // Conditions
    if (testConds) {
        if (!((UnitGetType(EventUnit()) == "NHbrVoidRift"))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    lv_navigator = EventUnit();
    lv_spaceUsed = UnitCargoValue(lv_navigator, c_unitCargoSpaceUsed);
    DialogControlHookupUnitStatus(c_triggerControlTypeProgressBar, "CustomCargoBar", lv_navigator);
    lv_unitStatusBar = DialogControlLastCreated();
    libNtve_gf_SetDialogItemCurrentValue(lv_unitStatusBar, UnitCargoValue(lv_navigator, c_unitCargoSpaceUsed), PlayerGroupAll());
    return true;
}

//--------------------------------------------------------------------------------------------------
void libNHBR_gt_HybridVoidRiftCargoUI_Init () {
    libNHBR_gt_HybridVoidRiftCargoUI = TriggerCreate("libNHBR_gt_HybridVoidRiftCargoUI_Func");
    TriggerAddEventUnitCargo(libNHBR_gt_HybridVoidRiftCargoUI, null, true);
    TriggerAddEventUnitCargo(libNHBR_gt_HybridVoidRiftCargoUI, null, false);
}

void libNHBR_InitTriggers () {
    libNHBR_gt_InitializeNetworkHybridRace_Init();
    libNHBR_gt_HybridNetworkNewCalculate_Init();
    libNHBR_gt_HybridNetworkPowerSourceUnitTypeInitialization_Init();
    libNHBR_gt_HybridNetworkNewCaseController_Init();
    libNHBR_gt_HybridNetworkNewCaseControllerRemoved_Init();
    libNHBR_gt_HybridProtectionUpdateArmorDataProperty_Init();
    libNHBR_gt_HybridTeleportOverrideTPTime_Init();
    libNHBR_gt_HybridTeleportTurnTargetingOrderOn_Init();
    libNHBR_gt_HybridTeleportTurnTargetingOrderOff_Init();
    libNHBR_gt_HybridTeleportConstructionProgress_Init();
    libNHBR_gt_HybridTeleportTransferDamage_Init();
    libNHBR_gt_HybridTimeScaleBuffInitialization_Init();
    libNHBR_gt_HybridTimeScaleBuffCommonConstructionStarted_Init();
    libNHBR_gt_HybridTimeScaleBuffCommonConstructionCompleted_Init();
    libNHBR_gt_HybridTimeScaleBuffCommonConstructionCanceled_Init();
    libNHBR_gt_HybridTimeScaleBuffMinionConstructionResumed_Init();
    libNHBR_gt_HybridTimeScaleBuffMinionConstructionPaused_Init();
    libNHBR_gt_HybridTimeScaleBuffStructureTrainingStarted_Init();
    libNHBR_gt_HybridTimeScaleBuffStructureTrainingCompleted_Init();
    libNHBR_gt_HybridTimeScaleBuffStructureTrainingCancelled_Init();
    libNHBR_gt_HybridTimeScaleBuffStructureResearchStarted_Init();
    libNHBR_gt_HybridTimeScaleBuffStructureResearchCompleted_Init();
    libNHBR_gt_HybridTimeScaleBuffStructureResearchCancelled_Init();
    libNHBR_gt_HybridDominatorUpgradeToAdvancedDominator_Init();
    libNHBR_gt_HybridReaverUpgradeToAdvancedReaver_Init();
    libNHBR_gt_HybridNemesisUpgradeToAdvancedNemesis_Init();
    libNHBR_gt_SilentWeaponBuff_Init();
    libNHBR_gt_HybridNavigatorCargoUI_Init();
    libNHBR_gt_HybridReaverConsumeDNAAutocastOn_Init();
    libNHBR_gt_HybridReaverConsumeDNAAutocastOff_Init();
    libNHBR_gt_HybridVoidRiftCargoUI_Init();
}

//--------------------------------------------------------------------------------------------------
// Library Initialization
//--------------------------------------------------------------------------------------------------
bool libNHBR_InitLib_completed = false;

void libNHBR_InitLib () {
    if (libNHBR_InitLib_completed) {
        return;
    }

    libNHBR_InitLib_completed = true;

    libNHBR_InitLibraries();
    libNHBR_InitVariables();
    libNHBR_InitTriggers();
}

